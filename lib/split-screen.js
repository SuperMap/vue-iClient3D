import{reactive as e,toRefs as r,ref as t,onMounted as o,watch as i,onBeforeUnmount as n,resolveComponent as a,resolveDirective as l,withDirectives as s,openBlock as u,createBlock as c,createVNode as p,toDisplayString as d,vModelSelect as f,vModelRadio as w,createTextVNode as v,vShow as m}from"vue";function h(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function V(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){h(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var O,N,k={errorMsg:function(e){console.log("error",e),alert("error："+e)},warnMsg:function(e){console.log("warn",e)},successMsg:function(e){console.log("success",e)}},L={showRenderLoopErrors:"渲染时发生错误，已停止渲染。",AttributeError:"该组件props没有这个属性：",NoPickPositionSupported:"不支持深度纹理,无法绘制多边形，地形操作功能无法使用！",NoTerrain:"请在地形里使用地形组件！",initViewerWarn:"请先初始化viewer!",MoveMouseHeightBox:"点击鼠标左键结束矩形绘制，移动鼠标绘制box高度",RightClickEndDrawing:"右键单击结束绘制",LeftClickBottomBox:"点击鼠标左键，开始绘制矩形作为box底面",ClickModelAddBox:"点击模型，添加裁剪盒子",SkyLineWarn:"获取天际线体前，请先绘制天际线！",SkyLineBody:"天际线体",ShadowqueryWarn:"此操作需要先开启阴影！",VeiwshedBody:"可视体",VeiwshedBodyHidden:"不可视体",EchartsErr:"二维显示需要echarts支持，未找到相关依赖！",BaseMapImg:"底图",tip1:"<p>点击左键确定操作区域中间点</p><p>右键单击结束绘制</p>"},S=(N=(navigator.language||navigator.browserLanguage).toLowerCase(),window.lang=N,N).toLowerCase();var T=((O=void 0!==S?S:(navigator.language||navigator.browserLanguage).toLowerCase()).startsWith("zh")||O.startsWith("ja"),L),M=e({isViewer:!1,changeLayers:0,changeGeometrys:0});function P(a){var l,s,u,c=e({multiViewport:"NONE",selectedViewport:"0",TreeDatas:[]});if(a)for(var p in a)c.hasOwnProperty(p)?c[p]=a[p]:k.errorMsg(T.AttributeError+p);var d=t(null),f={KeysViewport1:[],KeysViewport2:[],KeysViewport3:[],KeysViewport4:[]};function w(){l=viewer.scene.layers.layerQueue,s=viewer.imageryLayers._layers,u=viewer.scene._vectorTileMaps._layerQueue,viewer.terrainProvider,c.TreeDatas.length=0,function(){if(0==l.length)return;var e={id:"s3m",label:"S3M图层",children:[]};l.forEach((function(r,t){var o={id:"s3m-"+t,label:r._name};e.children.push(o)})),c.TreeDatas[0]=e}(),function(){if(1==s.length)return;var e={id:"img",label:"IMG图层",children:[]};s.forEach((function(r,t){var o=r._imageryProvider instanceof SuperMap3D.MvtProviderGL;if(0===t||o)return!0;var i={id:"img-"+t,label:T.BaseMapImg};r._imageryProvider.tablename&&(i.label=r._imageryProvider.tablename),e.children.unshift(i)})),e.children.length>0&&(c.TreeDatas[1]=e)}(),function(){if(console.log(u),0==u.length)return;var e={id:"mvt",label:"MVT图层",children:[]};u.forEach((function(r,t){var o={id:"mvt-"+t,label:r.name};e.children.unshift(o)})),c.TreeDatas[2]=e}(),setTimeout((function(){d.value.setCheckedNodes(c.TreeDatas);var e=d.value.getCheckedKeys(!0);f.KeysViewport1=b(e),f.KeysViewport2=b(e),f.KeysViewport3=b(e),f.KeysViewport4=b(e)}),500)}return o((function(){setTimeout((function(){w()}),500)})),i((function(){return M.changeLayers}),(function(e){w()})),i((function(){return c.multiViewport}),(function(e){viewer.scene.multiViewportMode=SuperMap3D.MultiViewportMode[e]})),i((function(){return c.selectedViewport}),(function(e,r){var t=d.value.getCheckedKeys(!0);f["KeysViewport"+r]=t,d.value.setCheckedKeys(f["KeysViewport"+e],!0)})),n((function(){l=null,s=null,u=null,f=null})),V(V({},r(c)),{},{tree:d,checkNode:function(e){var r=d.value.getNode(e);!function(e,r){var t=e[0],o=e[1];switch(t){case"s3m":if(!o){for(var i=0;i<l.length;i++)l[i].setVisibleInViewport(Number(c.selectedViewport),r);return}l[o].setVisibleInViewport(Number(c.selectedViewport),r);break;case"img":if(!o){for(var n=0;n<s.length;n++)s[n].setVisibleInViewport(Number(c.selectedViewport),r);return}s[o].setVisibleInViewport(Number(c.selectedViewport),r);break;case"mvt":if(!o){for(var a=0;a<u.length;a++)u[a].setVisibleInViewport(Number(c.selectedViewport),r);return}u[o].setVisibleInViewport(Number(c.selectedViewport),r)}}(e.id.split("-"),r.checked)}})}var D={name:"Sm3dSplitScreen",setup:function(e){var r=P(e);return{multiViewport:r.multiViewport,selectedViewport:r.selectedViewport,TreeDatas:r.TreeDatas,tree:r.tree,checkNode:r.checkNode}}},E={id:"split-screen-panel",class:"sm-panel"},j={class:"sm-function-module-sub-section",style:{margin:"0"}},I={class:"sm-half-L"},R={style:{width:"40%"}},A={value:"NONE"},C={value:"HORIZONTAL"},K={value:"VERTICAL"},x={value:"TRIPLE"},B={value:"QUAD"},U={class:"sm-half-L flex-start"},_={style:{width:"40%"}},Q={style:{width:"auto"}},W={class:"sm-half-L flex-start"},G={style:{width:"40%"}},H={style:{width:"auto"}},q={class:"sm-half-L"};D.render=function(e,r,t,o,i,n){var h=a("el-tree"),y=l("stopdrag"),V=l("drag");return s((u(),c("div",E,[s(p("div",j,[p("div",I,[p("label",R,d(e.Resource.multiViewport),1),s(p("select",{class:"sm-select-m",style:{width:"60%"},"onUpdate:modelValue":r[1]||(r[1]=function(e){return o.multiViewport=e})},[p("option",A,d(e.Resource.onePort),1),p("option",C,d(e.Resource.horizontalSnap),1),p("option",K,d(e.Resource.verticalSnap),1),p("option",x,d(e.Resource.tripeSnap),1),p("option",B,d(e.Resource.quadSnap),1)],512),[[f,o.multiViewport]])]),s(p("div",U,[p("label",_,[s(p("input",{type:"radio",value:"0","onUpdate:modelValue":r[2]||(r[2]=function(e){return o.selectedViewport=e})},null,512),[[w,o.selectedViewport]]),v(" "+d(e.Resource.viewportOne),1)]),p("label",Q,[s(p("input",{type:"radio",value:"1","onUpdate:modelValue":r[3]||(r[3]=function(e){return o.selectedViewport=e})},null,512),[[w,o.selectedViewport]]),v(" "+d(e.Resource.viewportTwo),1)])],512),[[m,"NONE"!=o.multiViewport]]),s(p("div",W,[p("label",G,[s(p("input",{type:"radio",value:"2","onUpdate:modelValue":r[4]||(r[4]=function(e){return o.selectedViewport=e})},null,512),[[w,o.selectedViewport]]),v(" "+d(e.Resource.viewportThree),1)]),s(p("label",H,[s(p("input",{type:"radio",value:"3","onUpdate:modelValue":r[5]||(r[5]=function(e){return o.selectedViewport=e})},null,512),[[w,o.selectedViewport]]),v(" "+d(e.Resource.viewportFour),1)],512),[[m,"QUAD"==o.multiViewport]])],512),[[m,"TRIPLE"==o.multiViewport||"QUAD"==o.multiViewport]]),s(p("div",q,[p(h,{data:o.TreeDatas,"show-checkbox":"","node-key":"id",accordion:"",ref:"tree",onCheck:o.checkNode},null,8,["data","onCheck"])],512),[[m,"NONE"!=o.multiViewport]])],512),[[y]])],512)),[[V]])},D.__file="src/components/scene/split-screen/split-screen.vue",D.install=function(e){e.component(D.name,D)};export default D;
