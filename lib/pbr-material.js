import{reactive as e,toRefs as r,watch as t,onBeforeUnmount as a,resolveDirective as n,withDirectives as o,openBlock as s,createBlock as l,createVNode as i,toDisplayString as c,Fragment as u,renderList as d,vShow as y,vModelSelect as p}from"vue";function m(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){m(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g=e({isViewer:!1,changeLayers:0,changeGeometrys:0});var v,w,P={errorMsg:function(e){console.log("error",e),alert("error："+e)},warnMsg:function(e){console.log("warn",e)},successMsg:function(e){console.log("success",e)}},L={showRenderLoopErrors:"渲染时发生错误，已停止渲染。",AttributeError:"该组件props没有这个属性：",NoPickPositionSupported:"不支持深度纹理,无法绘制多边形，地形操作功能无法使用！",NoTerrain:"请在地形里使用地形组件！",initViewerWarn:"请先初始化viewer!",MoveMouseHeightBox:"点击鼠标左键结束矩形绘制，移动鼠标绘制box高度",RightClickEndDrawing:"右键单击结束绘制",LeftClickBottomBox:"点击鼠标左键，开始绘制矩形作为box底面",ClickModelAddBox:"点击模型，添加裁剪盒子",SkyLineWarn:"获取天际线体前，请先绘制天际线！",SkyLineBody:"天际线体",ShadowqueryWarn:"此操作需要先开启阴影！",VeiwshedBody:"可视体",VeiwshedBodyHidden:"不可视体",EchartsErr:"二维显示需要echarts支持，未找到相关依赖！",BaseMapImg:"底图",tip1:"<p>点击左键确定操作区域中间点</p><p>右键单击结束绘制</p>"},h=(w=(navigator.language||navigator.browserLanguage).toLowerCase(),window.lang=w,w).toLowerCase();var N=((v=void 0!==h?h:(navigator.language||navigator.browserLanguage).toLowerCase()).startsWith("zh")||v.startsWith("ja"),L),O={Iron:"铁",Steel:"钢",Aluminum:"铝",Bronze:"铜",Ceramic:"陶瓷",Concrete:"混凝土",Rubber:"橡胶",Glass:"玻璃",Paint:"油漆",Plastic:"塑料",SelfLuminous:"自发光",Wood:"木材",PVC_White:"PVC"};function B(n){var o,s,l=e({layerNames:[],selectedLayerName:"none",selectedPbr:"Iron"});if(n)for(var i in n)l.hasOwnProperty(i)?l[i]=n[i]:P.errorMsg(N.AttributeError+i);function c(){viewer.scene,(o=viewer.scene.layers.layerQueue)&&o.length>0&&(o.forEach((function(e,r){l.layerNames.includes(e._name)||l.layerNames.push(e._name)})),(l.selectedLayerName="none")&&(l.selectedLayerName=l.layerNames[0],s=o[0])),viewer.terrainProvider instanceof SuperMap3D.EllipsoidTerrainProvider||l.layerNames.includes("地形")||(l.layerNames.push("地形"),(l.selectedLayerName="none")&&(l.selectedLayerName=l.layerNames[0]))}return g.isViewer&&c(),t((function(){return g.isViewer}),(function(e){e&&c()})),t((function(){return g.changeLayers}),(function(e){c()})),a((function(){o=null})),t((function(){return l.selectedLayerName}),(function(e){if("地形"!==e){var r=l.layerNames.indexOf(e);s=-1!=r?o[r]:void 0}})),f(f({},r(l)),{},{pbrLibrary:O,addPBR:function(){var e="public/data/pbr/jsons/"+l.selectedPbr+".json";"地形"!==l.selectedLayerName?s&&s.setPBRMaterialFromJSON(e):viewer.scene.globe.setPBRMaterialFromJSON(e)},clear:function(){"地形"!==l.selectedLayerName?s&&s.removePBRMaterial():viewer.scene.globe.removePBRMaterial()}})}var R={name:"Sm3dAddPbr",props:{selectedLayerName:{type:String}},setup:function(e){var r=B(e);return{layerNames:r.layerNames,selectedLayerName:r.selectedLayerName,pbrLibrary:r.pbrLibrary,selectedPbr:r.selectedPbr,addPBR:r.addPBR,clear:r.clear}}},j={id:"pbr-panel",class:"sm-panel"},M={class:"sm-function-module-sub-section",style:{margin:"0"}},S={class:"sm-half-L"},C={style:{width:"35%"}},k={class:"sm-half-L"},E={style:{width:"35%"}},V={class:"boxchild"};R.render=function(e,r,t,a,m,b){var f=n("stopdrag"),g=n("drag");return o((s(),l("div",j,[o(i("div",M,[i("div",S,[i("label",C,c(e.Resource.selectedLayer),1),o(i("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":r[1]||(r[1]=function(e){return a.selectedLayerName=e})},[(s(!0),l(u,null,d(a.layerNames,(function(e,r){return s(),l("option",{key:r,value:e},c(e),9,["value"])})),128)),o(i("option",{value:"none"},c(e.Resource.noLayer),513),[[y,0==a.layerNames.length]])],512),[[p,a.selectedLayerName]])]),i("div",k,[i("label",E,c(e.Resource.selectedPbr),1),o(i("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":r[2]||(r[2]=function(e){return a.selectedPbr=e})},[(s(!0),l(u,null,d(a.pbrLibrary,(function(e,r,t){return s(),l("option",{key:t,value:r},c(e),9,["value"])})),128))],512),[[p,a.selectedPbr]])]),i("div",V,[i("button",{type:"button",class:"tbtn",onClick:r[3]||(r[3]=function(){return a.addPBR&&a.addPBR.apply(a,arguments)})},c(e.Resource.add),1),i("button",{type:"button",class:"tbtn tbtn-margin-left",onClick:r[4]||(r[4]=function(){return a.clear&&a.clear.apply(a,arguments)})},c(e.Resource.clear),1)])],512),[[f]])],512)),[[g]])},R.__file="src/components/layer/pbr-material/pbr-material.vue",R.install=function(e){e.component(R.name,R)};export default R;
