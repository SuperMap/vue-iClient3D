import{reactive as e,toRefs as t,watch as n,onBeforeUnmount as r,resolveComponent as i,resolveDirective as o,withDirectives as a,openBlock as l,createBlock as u,createVNode as s,toDisplayString as p,vModelText as c}from"vue";function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}var v,g,y={errorMsg:function(e){console.log("error",e),alert("error："+e)},warnMsg:function(e){console.log("warn",e)},successMsg:function(e){console.log("success",e)}},S={showRenderLoopErrors:"渲染时发生错误，已停止渲染。",AttributeError:"该组件props没有这个属性：",NoPickPositionSupported:"不支持深度纹理,无法绘制多边形，地形操作功能无法使用！",NoTerrain:"请在地形里使用地形组件！",initViewerWarn:"请先初始化viewer!",MoveMouseHeightBox:"点击鼠标左键结束矩形绘制，移动鼠标绘制box高度",RightClickEndDrawing:"右键单击结束绘制",LeftClickBottomBox:"点击鼠标左键，开始绘制矩形作为box底面",ClickModelAddBox:"点击模型，添加裁剪盒子",SkyLineWarn:"获取天际线体前，请先绘制天际线！",SkyLineBody:"天际线体",ShadowqueryWarn:"此操作需要先开启阴影！",VeiwshedBody:"可视体",VeiwshedBodyHidden:"不可视体",EchartsErr:"二维显示需要echarts支持，未找到相关依赖！",BaseMapImg:"底图",tip1:"<p>点击左键确定操作区域中间点</p><p>右键单击结束绘制</p>"},w=(g=(navigator.language||navigator.browserLanguage).toLowerCase(),window.lang=g,g).toLowerCase();var M=((v=void 0!==w?w:(navigator.language||navigator.browserLanguage).toLowerCase()).startsWith("zh")||v.startsWith("ja"),S),D=e({isViewer:!1,changeLayers:0,changeGeometrys:0});function C(i){var o,a,l,u,s,p,c,d=e({clipWidth:5,clipHeight:5,heading:0,pitch:0,roll:0,extrude:1});if(i)for(var h in i)d.hasOwnProperty(h)?d[h]=i[h]:y.errorMsg(M.AttributeError+h);function f(){var e,t=b(o);try{for(t.s();!(e=t.n()).done;){e.value.setCustomClipCross({position:c,dimensions:p,heading:d.heading,pitch:d.pitch,roll:d.roll,extrudeDistance:Number(d.extrude)})}}catch(e){t.e(e)}finally{t.f()}}function v(){u&&viewer.entities.removeById("cross-clip-identify-box");var e,t=b(o);try{for(t.s();!(e=t.n()).done;){e.value.clearCustomClipBox()}}catch(e){t.e(e)}finally{t.f()}l=!1,u=void 0,a.removeInputAction(SuperMap3D.ScreenSpaceEventType.MOUSE_MOVE),a.removeInputAction(SuperMap3D.ScreenSpaceEventType.LEFT_CLICK)}return D.isViewer&&(a=new SuperMap3D.ScreenSpaceEventHandler(viewer.scene.canvas),o=viewer.scene.layers.layerQueue),n((function(){return D.isViewer}),(function(e){e&&(a=new SuperMap3D.ScreenSpaceEventHandler(viewer.scene.canvas),o=viewer.scene.layers.layerQueue)})),n((function(){return d.clipWidth}),(function(e){var t=Number(e);t<=0||!u||(u.box.dimensions=new SuperMap3D.Cartesian3(d.clipWidth,d.clipHeight,.1),p=new SuperMap3D.Cartesian3(t,d.clipHeight,d.extrude),f())})),n((function(){return d.clipHeight}),(function(e){var t=Number(e);t<=0||!u||(u.box.dimensions=new SuperMap3D.Cartesian3(d.clipWidth,d.clipHeight,.1),p=new SuperMap3D.Cartesian3(d.clipWidth,t,d.extrude),f())})),n((function(){return d.pitch}),(function(e){if(""!==e&&u){var t=Number(e),n=new SuperMap3D.HeadingPitchRoll(SuperMap3D.Math.toRadians(d.heading),SuperMap3D.Math.toRadians(t),SuperMap3D.Math.toRadians(d.roll)),r=SuperMap3D.Transforms.headingPitchRollQuaternion(s,n);u.orientation=r,f()}})),n((function(){return d.roll}),(function(e){if(""!==e&&u){var t=Number(e),n=new SuperMap3D.HeadingPitchRoll(SuperMap3D.Math.toRadians(d.heading),SuperMap3D.Math.toRadians(d.pitch),SuperMap3D.Math.toRadians(t)),r=SuperMap3D.Transforms.headingPitchRollQuaternion(s,n);u.orientation=r,f()}})),n((function(){return d.heading}),(function(e){if(""!==e&&u){var t=Number(e),n=new SuperMap3D.HeadingPitchRoll(SuperMap3D.Math.toRadians(t),SuperMap3D.Math.toRadians(d.pitch),SuperMap3D.Math.toRadians(d.roll)),r=SuperMap3D.Transforms.headingPitchRollQuaternion(s,n);u.orientation=r,f()}})),n((function(){return d.extrude}),(function(e){Number(e)<=0||!u||f()})),r((function(){a.destroy(),o=void 0,u=void 0,a=void 0,p=void 0})),m(m({},t(d)),{},{startCross:function(e){e.preventDefault(),viewer&&(u&&v(),function(){var e,t,n=b(o);try{for(n.s();!(e=n.n()).done;){e.value.selectEnabled=!1}}catch(e){n.e(e)}finally{n.f()}s=SuperMap3D.Cartesian3.fromDegrees(0,0,0),p=new SuperMap3D.Cartesian3(d.clipWidth,d.clipHeight,.1),u=viewer.entities.add({id:"cross-clip-identify-box",position:s,show:!1,box:{dimensions:p,fill:!1,outline:!0,outlineColor:SuperMap3D.Color.AQUA,outlineWidth:5}}),a.setInputAction((function(e){if(l){if(!(s=scene.pickPosition(e.endPosition)))return;u.position=s,t||(t=new SuperMap3D.HeadingPitchRoll(SuperMap3D.Math.toRadians(d.heading),SuperMap3D.Math.toRadians(d.pitch),SuperMap3D.Math.toRadians(d.roll)));var n=SuperMap3D.Transforms.headingPitchRollQuaternion(s,t);u.orientation=n}}),SuperMap3D.ScreenSpaceEventType.MOUSE_MOVE),a.setInputAction((function(e){if(l){if(!(c=scene.pickPosition(e.position)))return;f(),l=!1,u.show=!1}a.removeInputAction(SuperMap3D.ScreenSpaceEventType.MOUSE_MOVE),a.removeInputAction(SuperMap3D.ScreenSpaceEventType.LEFT_CLICK),t=null}),SuperMap3D.ScreenSpaceEventType.LEFT_CLICK)}(),l=!0,u.show=!0)},clearCross:v})}var x={name:"Sm3dClipCross",props:{clipWidth:{type:Number,default:5},clipHeight:{type:Number,default:5},heading:{type:Number,default:0},pitch:{type:Number,default:0},roll:{type:Number,default:0},extrude:{type:Number,default:1}},setup:function(e){var t=C(e);return{clipWidth:t.clipWidth,clipHeight:t.clipHeight,heading:t.heading,pitch:t.pitch,roll:t.roll,extrude:t.extrude,startCross:t.startCross,clearCross:t.clearCross}}},V={id:"viewer-panel",class:"sm-panel"},R={class:"sm-function-module-sub-section",style:{margin:"0"}},E={class:"sm-half-L"},O={class:"label-S"},H={class:"sm-slider-input-box"},P={class:"sm-half-L"},L={class:"label-S"},W={class:"sm-slider-input-box"},A={class:"sm-half-L"},U={class:"label-S"},j={class:"sm-slider-input-box"},N={class:"sm-half-L"},T={class:"label-S"},I={class:"sm-slider-input-box"},k={class:"sm-half-L"},B={class:"label-S"},_={class:"sm-slider-input-box"},z={class:"sm-half-L"},Q={class:"label-S"},F={class:"sm-slider-input-box"},K={class:"boxchild"};x.render=function(e,t,n,r,d,h){var m=i("el-slider"),f=o("stopdrag"),b=o("drag");return a((l(),u("div",V,[a(s("div",R,[s("div",E,[s("label",O,p(e.Resource.ClipWidth),1),s("div",H,[s(m,{modelValue:r.clipWidth,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.clipWidth=e}),min:1,step:1,"input-size":"mini",debounce:500,"show-tooltip":!1,style:{width:"62%"}},null,8,["modelValue"]),a(s("input",{class:"sm-input-S",min:"1",step:"1",type:"number","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.clipWidth=e})},null,512),[[c,r.clipWidth]])])]),s("div",P,[s("label",L,p(e.Resource.ClipHeight),1),s("div",W,[s(m,{modelValue:r.clipHeight,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.clipHeight=e}),min:1,step:1,"input-size":"mini",debounce:500,"show-tooltip":!1,style:{width:"62%"}},null,8,["modelValue"]),a(s("input",{class:"sm-input-S",min:"1",step:"1",type:"number","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.clipHeight=e})},null,512),[[c,r.clipHeight]])])]),s("div",A,[s("label",U,p(e.Resource.Xrotation),1),s("div",j,[s(m,{modelValue:r.pitch,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.pitch=e}),min:0,step:1,max:360,"input-size":"mini",debounce:500,"show-tooltip":!1,style:{width:"62%"}},null,8,["modelValue"]),a(s("input",{class:"sm-input-S",min:"0",max:"360",step:"1",type:"number","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.pitch=e})},null,512),[[c,r.pitch]])])]),s("div",N,[s("label",T,p(e.Resource.Yrotation),1),s("div",I,[s(m,{modelValue:r.roll,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.roll=e}),min:0,step:1,max:360,"input-size":"mini",debounce:500,"show-tooltip":!1,style:{width:"62%"}},null,8,["modelValue"]),a(s("input",{class:"sm-input-S",min:"0",step:"1",max:"360",type:"number","onUpdate:modelValue":t[8]||(t[8]=function(e){return r.roll=e})},null,512),[[c,r.roll]])])]),s("div",k,[s("label",B,p(e.Resource.Zrotation),1),s("div",_,[s(m,{modelValue:r.heading,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.heading=e}),min:0,step:1,max:360,"input-size":"mini",debounce:500,"show-tooltip":!1,style:{width:"62%"}},null,8,["modelValue"]),a(s("input",{class:"sm-input-S",min:"0",step:"1",max:"360",type:"number","onUpdate:modelValue":t[10]||(t[10]=function(e){return r.heading=e})},null,512),[[c,r.heading]])])]),s("div",z,[s("label",Q,p(e.Resource.stretchHeight),1),s("div",F,[s(m,{modelValue:r.extrude,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.extrude=e}),min:1,step:1,"input-size":"mini",debounce:500,"show-tooltip":!1,style:{width:"62%"}},null,8,["modelValue"]),a(s("input",{class:"sm-input-S",min:"1",step:"1",type:"number","onUpdate:modelValue":t[12]||(t[12]=function(e){return r.extrude=e})},null,512),[[c,r.extrude]])])]),s("div",K,[s("button",{onClick:t[13]||(t[13]=function(){return r.startCross&&r.startCross.apply(r,arguments)}),class:"tbtn",type:"button"},p(e.Resource.clip),1),s("button",{onClick:t[14]||(t[14]=function(){return r.clearCross&&r.clearCross.apply(r,arguments)}),class:"tbtn tbtn-margin-left",type:"button"},p(e.Resource.clear),1)])],512),[[f]])],512)),[[b]])},x.__file="src/components/clip/clip-cross/clip-cross.vue",x.install=function(e){e.component(x.name,x)};export default x;
