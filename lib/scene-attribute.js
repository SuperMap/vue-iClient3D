import{reactive as e,toRefs as n,watch as o,onBeforeUnmount as s,resolveComponent as t,resolveDirective as r,openBlock as i,createBlock as a,Fragment as u,withDirectives as c,createVNode as l,vModelCheckbox as p,createTextVNode as d,toDisplayString as w,vModelSelect as y,vShow as f,resolveDynamicComponent as m}from"vue";function g(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function b(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,s)}return o}var h=e({isViewer:!1,changeLayers:0,changeGeometrys:0});var v,S,k={errorMsg:function(e){console.log("error",e),alert("error："+e)},warnMsg:function(e){console.log("warn",e)},successMsg:function(e){console.log("success",e)}},x={showRenderLoopErrors:"渲染时发生错误，已停止渲染。",AttributeError:"该组件props没有这个属性：",NoPickPositionSupported:"不支持深度纹理,无法绘制多边形，地形操作功能无法使用！",NoTerrain:"请在地形里使用地形组件！",initViewerWarn:"请先初始化viewer!",MoveMouseHeightBox:"点击鼠标左键结束矩形绘制，移动鼠标绘制box高度",RightClickEndDrawing:"右键单击结束绘制",LeftClickBottomBox:"点击鼠标左键，开始绘制矩形作为box底面",ClickModelAddBox:"点击模型，添加裁剪盒子",SkyLineWarn:"获取天际线体前，请先绘制天际线！",SkyLineBody:"天际线体",ShadowqueryWarn:"此操作需要先开启阴影！",VeiwshedBody:"可视体",VeiwshedBodyHidden:"不可视体",EchartsErr:"二维显示需要echarts支持，未找到相关依赖！",BaseMapImg:"底图",tip1:"<p>点击左键确定操作区域中间点</p><p>右键单击结束绘制</p>"},B=(S=(navigator.language||navigator.browserLanguage).toLowerCase(),window.lang=S,S).toLowerCase();var R=((v=void 0!==B?B:(navigator.language||navigator.browserLanguage).toLowerCase()).startsWith("zh")||v.startsWith("ja"),x);function D(t){var r=e({earthShow:!0,shadows:!1,cloud:!1,skyBox:!1,sunShow:!1,timeline:!1,depthAgainst:!0,atomsphereRender:!0,fogEffect:!0,underground:!0,frameRate:!1,rain:!1,snow:!1,surfaceTransparency:1,cloudsUrl:"public/img/skyboxs/clouds/clouds1.png",skyboxSources:null,skyboxType:"bluesky",uspeed:0,vspeed:0,wspeed:.5,viewMode:"3D",rainAngle:45,rainSpeed:8,snowDesity:10,snowSpeed:4,snowAngle:10,snowType:"0",compass:!1,isCompass:""});if(r.skyboxSources={bluesky:{positiveX:"public/img/skyboxs/bluesky/Right.jpg",negativeX:"public/img/skyboxs/bluesky/Left.jpg",positiveY:"public/img/skyboxs/bluesky/Front.jpg",negativeY:"public/img/skyboxs/bluesky/Back.jpg",positiveZ:"public/img/skyboxs/bluesky/Up.jpg",negativeZ:"public/img/skyboxs/bluesky/Down.jpg"},sunsetglow:{positiveX:"public/img/skyboxs/sunsetglow/Right.jpg",negativeX:"public/img/skyboxs/sunsetglow/Left.jpg",positiveY:"public/img/skyboxs/sunsetglow/Front.jpg",negativeY:"public/img/skyboxs/sunsetglow/Back.jpg",positiveZ:"public/img/skyboxs/sunsetglow/Up.jpg",negativeZ:"public/img/skyboxs/sunsetglow/Down.jpg"}},t)for(var i in t)r.hasOwnProperty(i)?r[i]=t[i]:k.errorMsg(R.AttributeError+i);var a,u=new SuperMap3D.CloudBox({url:r.cloudsUrl}),c={};for(var l in r.skyboxSources){var p=new SuperMap3D.SkyBox({sources:r.skyboxSources[l]});p.USpeed=r.uspeed,p.VSpeed=r.vspeed,p.WSpeed=r.wspeed,c[l]=p}function d(){if(viewer.scene.frameState.passes.render){for(var e in c)c[e].update(viewer.scene.frameState,!0),c[e].show=!1;viewer.scene.postRender.removeEventListener(d)}}function w(){r.skyBox&&(viewer.scene.camera.positionCartographic.height>22e4?(viewer.scene.skyBox.show=!1,r.atomsphereRender=!0):(viewer.scene.skyBox.show=!0,r.atomsphereRender=!1))}h.isViewer&&(a=viewer.scene.skyBox,viewer.scene.postRender.addEventListener(d),viewer.scene.postProcessStages.snow.uniforms.density=parseFloat(r.snowDesity),viewer.scene.postProcessStages.snow.uniforms.speed=parseFloat(r.snowSpeed),viewer.scene.postProcessStages.rain.uniforms.speed=parseFloat(r.rainSpeed),w());for(var y=viewer.scene.layers.layerQueue,f=0;f<y.length;f++)y[f].shadowType=2;return o((function(){return h.isViewer}),(function(e){e&&(a=viewer.scene.skyBox,viewer.scene.postRender.addEventListener(d),viewer.scene.postProcessStages.snow.uniforms.density=parseFloat(r.snowDesity),viewer.scene.postProcessStages.snow.uniforms.speed=parseFloat(r.snowSpeed),viewer.scene.postProcessStages.rain.uniforms.speed=parseFloat(r.rainSpeed),w())})),s((function(){for(var e in u.destroy(),c)c[e].destroy();viewer.scene.skyBox=a})),o((function(){return r.earthShow}),(function(e){viewer.scene.globe.show=e})),o((function(){return r.shadows}),(function(e){e?(viewer.shadows=!0,viewer.pcss=!0,viewer.shadowQuality=0,viewer.scene.shadowMap.maximumDistance=2e3,viewer.shadowMap.darkness=.4,viewer.shadowMap.penumbraRatio=.1):viewer.shadows=!1})),o((function(){return r.sunShow}),(function(e){viewer.scene.globe.enableLighting=e})),o((function(){return r.timeline}),(function(e){var n=document.getElementsByClassName("supermap3d-viewer-timelineContainer")[0];e?(n.style.visibility="visible",n.style["z-index"]=99999999999):n.style.visibility="hidden"})),o((function(){return r.depthAgainst}),(function(e){viewer.scene.globe.depthTestAgainstTerrain=e})),o((function(){return r.atomsphereRender}),(function(e){viewer.scene.skyAtmosphere.show=e})),o((function(){return r.fogEffect}),(function(e){viewer.scene.fog.enabled=e})),o((function(){return r.surfaceTransparency}),(function(e){viewer.scene.globe.globeAlpha=parseFloat(e)})),o((function(){return r.underground}),(function(e){viewer.scene.undergroundMode=e,e?(viewer.scene.screenSpaceCameraController.minimumZoomDistance=-1e3,viewer.scene.terrainProvider.isCreateSkirt=!1):(viewer.scene.screenSpaceCameraController.minimumZoomDistance=1,viewer.scene.terrainProvider.isCreateSkirt=!0)})),o((function(){return r.frameRate}),(function(e){viewer.scene.debugShowFramesPerSecond=e})),o((function(){return r.cloud}),(function(e){viewer.scene.cloudBox=e?u:null})),o((function(){return r.cloudsUrl}),(function(e){viewer.scene.cloudBox.url=e})),o((function(){return r.skyBox}),(function(e){if(e){var n=viewer.scene.camera.positionCartographic.height;viewer.scene.postRender.addEventListener(w),viewer.scene.skyBox=c[r.skyboxType],n<22e4?(viewer.scene.skyBox.show=!0,r.atomsphereRender=!1):r.atomsphereRender=!0}else r.atomsphereRender=!0,viewer.scene.skyBox.show=!1,viewer.scene.skyBox=a,viewer.scene.postRender.removeEventListener(w)})),o((function(){return r.skyboxType}),(function(e){r.skyBox&&(c[e].show=!0,viewer.scene.skyBox=c[e])})),o((function(){return r.uspeed}),(function(e){c[r.skyboxType].USpeed=Number(e),r.skyBox&&(viewer.scene.skyBox.USpeed=Number(e))})),o((function(){return r.vspeed}),(function(e){c[r.skyboxType].VSpeed=Number(e),r.skyBox&&(viewer.scene.skyBox.VSpeed=Number(e))})),o((function(){return r.wspeed}),(function(e){c[r.skyboxType].WSpeed=Number(e),r.skyBox&&(viewer.scene.skyBox.WSpeed=Number(e))})),o((function(){return r.viewMode}),(function(e){viewer.scene.mode="2D"===e?SuperMap3D.SceneMode.SCENE2D:"3D"===e?SuperMap3D.SceneMode.SCENE3D:SuperMap3D.SceneMode.COLUMBUS_VIEW})),o((function(){return r.rain}),(function(e){viewer.scene.postProcessStages.rain.enabled=e})),o((function(){return r.snow}),(function(e){viewer.scene.postProcessStages.snow.enabled=e,console.log(viewer.scene.postProcessStages.snow.uniforms)})),o((function(){return r.rainAngle}),(function(e){viewer.scene.postProcessStages.rain.uniforms.angle=parseFloat(e)})),o((function(){return r.rainSpeed}),(function(e){viewer.scene.postProcessStages.rain.uniforms.speed=parseFloat(e)})),o((function(){return r.snowDesity}),(function(e){viewer.scene.postProcessStages.snow.uniforms.density=parseFloat(e)})),o((function(){return r.snowSpeed}),(function(e){viewer.scene.postProcessStages.snow.uniforms.speed=parseFloat(e)})),o((function(){return r.snowAngle}),(function(e){viewer.scene.postProcessStages.snow.uniforms.angle=parseFloat(e)})),o((function(){return r.snowType}),(function(e){switch(e){case"0":r.snowDesity=5,r.snowSpeed=2;break;case"1":r.snowDesity=10,r.snowSpeed=4;break;case"2":r.snowDesity=15,r.snowSpeed=6;break;case"3":r.snowDesity=20,r.snowSpeed=10;break;default:r.snowDesity=5,r.snowSpeed=2}})),o((function(){return r.isCompass}),(function(e){r.compass=e?"Sm3dCompass":""})),function(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?b(Object(o),!0).forEach((function(n){g(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}({},n(r))}var M={name:"Sm3dSceneAttribute",props:{earthShow:{type:Boolean,default:!0},shadows:{type:Boolean,default:!1},cloud:{type:Boolean,default:!1},skyBox:{type:Boolean,default:!1},sunShow:{type:Boolean,default:!1},timeline:{type:Boolean,default:!1},depthAgainst:{type:Boolean,default:!0},atomsphereRender:{type:Boolean,default:!0},fogEffect:{type:Boolean,default:!0},underground:{type:Boolean,default:!0},frameRate:{type:Boolean,default:!0},skyboxSources:{type:Object},surfaceTransparency:{type:Number},cloudsUrl:{type:String},skyboxType:{type:String},uspeed:{type:Number},vspeed:{type:Number},wspeed:{type:Number},viewMode:{type:String},rainAngle:{type:Number},rainSpeed:{type:Number},snowDesity:{type:Number},snowSpeed:{type:Number},snowAngle:{type:Number},snowType:{type:String},isCompass:{type:Boolean},rain:{type:Boolean},snow:{type:Boolean}},setup:function(e){var n=D(e);return{earthShow:n.earthShow,shadows:n.shadows,cloud:n.cloud,skyBox:n.skyBox,sunShow:n.sunShow,timeline:n.timeline,depthAgainst:n.depthAgainst,atomsphereRender:n.atomsphereRender,fogEffect:n.fogEffect,underground:n.underground,frameRate:n.frameRate,Facade:n.Facade,surfaceTransparency:n.surfaceTransparency,viewMode:n.viewMode,rain:n.rain,snow:n.snow,snowType:n.snowType,isCompass:n.isCompass,compass:n.compass}}},P={id:"s3mlayer-attribute-panel",class:"sm-panel"},V={class:"sm-function-module-sub-section",style:{margin:"0"}},C={class:"sm-half-L"},U={style:{width:"28%"}},E={style:{width:"33%"}},j={style:{width:"33%"}},T={style:{width:"28%"}},L={style:{width:"33%"}},A={style:{width:"33%"}},O={style:{width:"28%"}},N={style:{width:"33%"}},F={style:{width:"33%"}},W={style:{width:"28%"}},Z={style:{width:"33%"}},X={style:{width:"33%"}},Y={style:{width:"28%"}},z={style:{width:"33%"}},_=l("label",{style:{width:"33%"}},null,-1),H={class:"sm-half-L"},I={style:{width:"35%"}},Q=l("option",{value:"3D"},"3D",-1),q=l("option",{value:"2.5D"},"2.5D",-1),G=l("option",{value:"2D"},"2D",-1),J={class:"sm-half-L"},K={style:{width:"35%"}},$={class:"sm-half-L"},ee=l("label",{style:{width:"35%"}},"下雪类型",-1),ne=l("option",{value:"0"},"小雪",-1),oe=l("option",{value:"1"},"中雪",-1),se=l("option",{value:"2"},"大雪",-1),te=l("option",{value:"3"},"暴雪",-1);M.render=function(e,n,o,s,g,b){var h=t("el-slider"),v=r("stopdrag"),S=r("drag");return i(),a(u,null,[c(l("div",P,[c(l("div",V,[l("div",C,[l("label",U,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=function(e){return s.earthShow=e})},null,512),[[p,s.earthShow]]),d(" "+w(e.Resource.earthShow),1)]),l("label",E,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=function(e){return s.timeline=e})},null,512),[[p,s.timeline]]),d(" "+w(e.Resource.timeline),1)]),l("label",j,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=function(e){return s.atomsphereRender=e})},null,512),[[p,s.atomsphereRender]]),d(" "+w(e.Resource.atomsphereRender),1)]),l("label",T,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=function(e){return s.sunShow=e})},null,512),[[p,s.sunShow]]),d(" "+w(e.Resource.sunShow),1)]),l("label",L,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=function(e){return s.fogEffect=e})},null,512),[[p,s.fogEffect]]),d(" "+w(e.Resource.fogEffect),1)]),l("label",A,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=function(e){return s.depthAgainst=e})},null,512),[[p,s.depthAgainst]]),d(" "+w(e.Resource.depthAgainst),1)]),l("label",O,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[7]||(n[7]=function(e){return s.shadows=e})},null,512),[[p,s.shadows]]),d(" "+w(e.Resource.shadowMap),1)]),l("label",N,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[8]||(n[8]=function(e){return s.underground=e})},null,512),[[p,s.underground]]),d(" "+w(e.Resource.underground),1)]),l("label",F,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[9]||(n[9]=function(e){return s.frameRate=e})},null,512),[[p,s.frameRate]]),d(" "+w(e.Resource.frameRate),1)]),l("label",W,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[10]||(n[10]=function(e){return s.cloud=e})},null,512),[[p,s.cloud]]),d(" "+w(e.Resource.cloud),1)]),l("label",Z,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[11]||(n[11]=function(e){return s.skyBox=e})},null,512),[[p,s.skyBox]]),d(" "+w(e.Resource.skyBox),1)]),l("label",X,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[12]||(n[12]=function(e){return s.rain=e})},null,512),[[p,s.rain]]),d(" "+w(e.Resource.rain),1)]),l("label",Y,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[13]||(n[13]=function(e){return s.snow=e})},null,512),[[p,s.snow]]),d(" "+w(e.Resource.snow),1)]),l("label",z,[c(l("input",{type:"checkbox","onUpdate:modelValue":n[14]||(n[14]=function(e){return s.isCompass=e})},null,512),[[p,s.isCompass]]),d(" "+w(e.Resource.compass),1)]),_]),l("div",H,[l("label",I,w(e.Resource.viewMode),1),c(l("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":n[15]||(n[15]=function(e){return s.viewMode=e})},[Q,q,G],512),[[y,s.viewMode]])]),l("div",J,[l("label",K,w(e.Resource.surfaceTransparency),1),l(h,{modelValue:s.surfaceTransparency,"onUpdate:modelValue":n[16]||(n[16]=function(e){return s.surfaceTransparency=e}),min:0,max:1,step:.01,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),c(l("div",$,[ee,c(l("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":n[17]||(n[17]=function(e){return s.snowType=e})},[ne,oe,se,te],512),[[y,s.snowType]])],512),[[f,!1]])],512),[[v]])],512),[[S]]),(i(),a(m(s.compass)))],64)},M.__file="src/components/scene/scene-attribute/scene-attribute.vue",M.install=function(e){e.component(M.name,M)};export default M;
