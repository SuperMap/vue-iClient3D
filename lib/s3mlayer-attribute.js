import{reactive as e,toRefs as t,watch as o,onBeforeUnmount as n,resolveComponent as a,resolveDirective as s,withDirectives as l,openBlock as r,createBlock as i,createVNode as u,toDisplayString as c,Fragment as d,renderList as m,vShow as h,vModelSelect as p,vModelRadio as y,createTextVNode as b,vModelCheckbox as w}from"vue";function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var v=e({isViewer:!1,changeLayers:0,changeGeometrys:0});var S,N,L={errorMsg:function(e){console.log("error",e),alert("error："+e)},warnMsg:function(e){console.log("warn",e)},successMsg:function(e){console.log("success",e)}},V={showRenderLoopErrors:"渲染时发生错误，已停止渲染。",AttributeError:"该组件props没有这个属性：",NoPickPositionSupported:"不支持深度纹理,无法绘制多边形，地形操作功能无法使用！",NoTerrain:"请在地形里使用地形组件！",initViewerWarn:"请先初始化viewer!",MoveMouseHeightBox:"点击鼠标左键结束矩形绘制，移动鼠标绘制box高度",RightClickEndDrawing:"右键单击结束绘制",LeftClickBottomBox:"点击鼠标左键，开始绘制矩形作为box底面",ClickModelAddBox:"点击模型，添加裁剪盒子",SkyLineWarn:"获取天际线体前，请先绘制天际线！",SkyLineBody:"天际线体",ShadowqueryWarn:"此操作需要先开启阴影！",VeiwshedBody:"可视体",VeiwshedBodyHidden:"不可视体",EchartsErr:"二维显示需要echarts支持，未找到相关依赖！",BaseMapImg:"底图",tip1:"<p>点击左键确定操作区域中间点</p><p>右键单击结束绘制</p>"},E=(N=(navigator.language||navigator.browserLanguage).toLowerCase(),window.lang=N,N).toLowerCase();var O=((S=void 0!==E?E:(navigator.language||navigator.browserLanguage).toLowerCase()).startsWith("zh")||S.startsWith("ja"),V);function k(a){var s,l,r=e({layerNames:[],selectedLayerName:"none",brightness:1,contrast:1,hue:0,saturation:1,gamma:1,shadowMode:"noShadow",shadowDarkness:.3,selectEnabled:!0,multiChoose:!1,cullEnabled:!1,visibility:"showAll"});if(a)for(var i in a)r.hasOwnProperty(i)?r[i]=a[i]:L.errorMsg(O.AttributeError+i);function u(){viewer.scene,(s=viewer.scene.layers.layerQueue)&&s.length>0?(s.forEach((function(e,t){r.layerNames.includes(e._name)||r.layerNames.push(e._name)})),(r.selectedLayerName="none")&&(r.selectedLayerName=r.layerNames[0],l=s[0])):r.layerNames=[]}return v.isViewer&&u(),o((function(){return v.isViewer}),(function(e){e&&u()})),o((function(){return v.changeLayers}),(function(e){u()})),n((function(){s=null})),o((function(){return r.selectedLayerName}),(function(e){var t=r.layerNames.indexOf(e);-1!=t&&(l=s[t])})),o((function(){return r.brightness}),(function(e){l&&(l.brightness=Number(e))})),o((function(){return r.contrast}),(function(e){l&&(l.contrast=Number(e))})),o((function(){return r.hue}),(function(e){l&&(l.hue=Number(e))})),o((function(){return r.saturation}),(function(e){l&&(l.saturation=Number(e))})),o((function(){return r.gamma}),(function(e){l&&(l.gamma=Number(e))})),o((function(){return r.shadowMode}),(function(e){if(l)switch(e){case"noShadow":viewer.shadows=!1,l.shadowType=SuperMap3D.ShadowType.NONE;break;case"chooseShadow":viewer.shadows=!0,l.shadowType=SuperMap3D.ShadowType.SELECTION,l.refresh();break;case"allShadow":viewer.shadows=!0,l.shadowType=SuperMap3D.ShadowType.ALL,l.refresh()}})),o((function(){return r.shadowDarkness}),(function(e){viewer.scene.shadowMap.darkness=Number(e)})),o((function(){return r.multiChoose}),(function(e){l&&(l.multiChoose=e)})),o((function(){return r.selectEnabled}),(function(e){l&&(l.selectEnabled=e)})),o((function(){return r.cullEnabled}),(function(e){l&&(l.cullEnabled=e)})),o((function(){return r.visibility}),(function(e){if(l)switch(e){case"showAll":l.setObjsVisible([],!1);break;case"onlyHideSlection":var t=l.getSelection();l.setObjsVisible(t,!1);break;case"onlyShowSlection":var o=l.getSelection();l.setObjsVisible(o,!0)}})),function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?g(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t(r))}var M={name:"Sm3dS3mlayerAttribute",props:{selectedLayerName:{type:String},brightness:{type:Number},contrast:{type:Number},hue:{type:Number},saturation:{type:Number},gamma:{type:Number},shadowMode:{type:String},shadowDarkness:{type:Number},multiChoose:{type:Boolean},cullEnabled:{type:Boolean},visibility:{type:String}},setup:function(e){var t=k(e);return{layerNames:t.layerNames,selectedLayerName:t.selectedLayerName,brightness:t.brightness,contrast:t.contrast,hue:t.hue,saturation:t.saturation,gamma:t.gamma,shadowMode:t.shadowMode,shadowDarkness:t.shadowDarkness,selectEnabled:t.selectEnabled,multiChoose:t.multiChoose,cullEnabled:t.cullEnabled,visibility:t.visibility}}},R={id:"s3mlayer-attribute-panel",class:"sm-panel"},x={class:"sm-function-module-sub-section",style:{margin:"0"}},j={class:"sm-half-L"},C={style:{width:"35%"}},D={class:"sm-half-L"},U={style:{width:"35%"}},P={class:"sm-half-L"},B={style:{width:"35%"}},A={class:"sm-half-L"},T={style:{width:"35%"}},z={class:"sm-half-L"},H={style:{width:"35%"}},W={class:"sm-half-L"},_={style:{width:"35%"}},I={class:"sm-half-L",style:{"margin-top":"6px"}},q={style:{width:"35%"}},G={style:{width:"auto"}},Q={class:"sm-half-L"},F={style:{width:"35%"}},J={class:"sm-half-L"},K={style:{width:"auto"}},X={style:{width:"auto"}},Y={style:{width:"auto"}},Z={class:"sm-half-L"},$={style:{width:"35%"}},ee={value:"onlyShowSlection"},te={value:"onlyHideSlection"},oe={value:"showAll"};M.render=function(e,t,o,n,f,g){var v=a("el-slider"),S=s("stopdrag"),N=s("drag");return l((r(),i("div",R,[l(u("div",x,[u("div",j,[u("label",C,c(e.Resource.selectedLayer),1),l(u("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.selectedLayerName=e})},[(r(!0),i(d,null,m(n.layerNames,(function(e,t){return r(),i("option",{key:t,value:e},c(e),9,["value"])})),128)),l(u("option",{value:"none"},c(e.Resource.noS3mLayer),513),[[h,0==n.layerNames.length]])],512),[[p,n.selectedLayerName]])]),u("div",D,[u("label",U,c(e.Resource.brightness),1),u(v,{modelValue:n.brightness,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.brightness=e}),min:0,max:3,step:.05,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),u("div",P,[u("label",B,c(e.Resource.contrast),1),u(v,{modelValue:n.contrast,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.contrast=e}),min:0,max:3,step:.05,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),u("div",A,[u("label",T,c(e.Resource.hue),1),u(v,{modelValue:n.hue,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.hue=e}),min:0,max:3,step:.05,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),u("div",z,[u("label",H,c(e.Resource.saturation),1),u(v,{modelValue:n.saturation,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.saturation=e}),min:0,max:3,step:.05,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),u("div",W,[u("label",_,c(e.Resource.gamma),1),u(v,{modelValue:n.gamma,"onUpdate:modelValue":t[6]||(t[6]=function(e){return n.gamma=e}),min:0,max:3,step:.05,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),u("div",I,[u("label",q,[l(u("input",{type:"radio",value:"noShadow","onUpdate:modelValue":t[7]||(t[7]=function(e){return n.shadowMode=e})},null,512),[[y,n.shadowMode]]),b(c(e.Resource.closeShadow),1)]),u("label",G,[l(u("input",{type:"radio",value:"allShadow","onUpdate:modelValue":t[8]||(t[8]=function(e){return n.shadowMode=e})},null,512),[[y,n.shadowMode]]),b(c(e.Resource.openShadow),1)])]),u("div",Q,[u("label",F,c(e.Resource.shadowDarkness),1),u(v,{modelValue:n.shadowDarkness,"onUpdate:modelValue":t[9]||(t[9]=function(e){return n.shadowDarkness=e}),min:0,max:1,step:.05,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue","step"])]),u("div",J,[u("label",K,[l(u("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=function(e){return n.selectEnabled=e})},null,512),[[w,n.selectEnabled]]),b(c(e.Resource.selectEnabled),1)]),l(u("label",X,[l(u("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=function(e){return n.multiChoose=e})},null,512),[[w,n.multiChoose]]),b(c(e.Resource.multiChoose),1)],512),[[h,n.selectEnabled]]),u("label",Y,[l(u("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=function(e){return n.cullEnabled=e})},null,512),[[w,n.cullEnabled]]),b(c(e.Resource.cullEnabled),1)])]),u("div",Z,[u("label",$,c(e.Resource.visibility),1),l(u("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":t[13]||(t[13]=function(e){return n.visibility=e})},[u("option",ee,c(e.Resource.onlyShowSlection),1),u("option",te,c(e.Resource.onlyHideSlection),1),u("option",oe,c(e.Resource.showAll),1)],512),[[p,n.visibility]])])],512),[[S]])],512)),[[N]])},M.__file="src/components/layer/s3mlayer-attribute/s3mlayer-attribute.vue",M.install=function(e){e.component(M.name,M)};export default M;
