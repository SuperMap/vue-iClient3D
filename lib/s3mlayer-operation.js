import{reactive as e,toRefs as t,watch as o,onBeforeUnmount as n,resolveComponent as r,resolveDirective as s,withDirectives as l,openBlock as a,createBlock as f,createVNode as i,toDisplayString as c,Fragment as u,renderList as p,vShow as d,vModelSelect as m,vModelCheckbox as y,createTextVNode as g,createCommentVNode as b}from"vue";function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function O(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var w=e({isViewer:!1,changeLayers:0,changeGeometrys:0});var h,N,L={errorMsg:function(e){console.log("error",e),alert("error："+e)},warnMsg:function(e){console.log("warn",e)},successMsg:function(e){console.log("success",e)}},S={showRenderLoopErrors:"渲染时发生错误，已停止渲染。",AttributeError:"该组件props没有这个属性：",NoPickPositionSupported:"不支持深度纹理,无法绘制多边形，地形操作功能无法使用！",NoTerrain:"请在地形里使用地形组件！",initViewerWarn:"请先初始化viewer!",MoveMouseHeightBox:"点击鼠标左键结束矩形绘制，移动鼠标绘制box高度",RightClickEndDrawing:"右键单击结束绘制",LeftClickBottomBox:"点击鼠标左键，开始绘制矩形作为box底面",ClickModelAddBox:"点击模型，添加裁剪盒子",SkyLineWarn:"获取天际线体前，请先绘制天际线！",SkyLineBody:"天际线体",ShadowqueryWarn:"此操作需要先开启阴影！",VeiwshedBody:"可视体",VeiwshedBodyHidden:"不可视体",EchartsErr:"二维显示需要echarts支持，未找到相关依赖！",BaseMapImg:"底图",tip1:"<p>点击左键确定操作区域中间点</p><p>右键单击结束绘制</p>"},V=(N=(navigator.language||navigator.browserLanguage).toLowerCase(),window.lang=N,N).toLowerCase();var j=((h=void 0!==V?V:(navigator.language||navigator.browserLanguage).toLowerCase()).startsWith("zh")||h.startsWith("ja"),S);function P(r){var s,l,a=e({layerNames:[],selectedLayerName:"none",selectedoffset:!1,offsetX:0,offsetY:0,offsetZ:0,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnit:0});if(r)for(var f in r)a.hasOwnProperty(f)?a[f]=r[f]:L.errorMsg(j.AttributeError+f);function i(){viewer.scene,(s=viewer.scene.layers.layerQueue)&&s.length>0?(s.forEach((function(e,t){a.layerNames.includes(e._name)||a.layerNames.push(e._name)})),(a.selectedLayerName="none")&&(a.selectedLayerName=a.layerNames[0],l=s[0])):a.layerNames=[]}function c(){var e=l.getSelection();l.removeAllObjsOffset(),e.length>0&&l.setObjsOffset(e)}return w.isViewer&&i(),o((function(){return w.isViewer}),(function(e){e&&i()})),o((function(){return w.changeLayers}),(function(e){i()})),n((function(){s=null})),o((function(){return a.selectedLayerName}),(function(e){var t=a.layerNames.indexOf(e);-1!=t&&(l=s[t])})),o((function(){return a.selectedoffset}),(function(e){if(l)if(e){var t=Number(a.offsetX),o=Number(a.offsetY),n=Number(a.offsetZ);l.selectedTranslate=new SuperMap3D.Cartesian3(t,o,n),viewer.eventManager.addEventListener("CLICK",c,!0),c()}else viewer.eventManager.removeEventListener("CLICK",c),l.selectedTranslate=new SuperMap3D.Cartesian3(0,0,0),l.removeAllObjsOffset(),l.releaseSelection()})),o((function(){return a.offsetX}),(function(e){if(a.selectedoffset){var t=Number(e),o=Number(a.offsetY),n=Number(a.offsetZ);l.selectedTranslate=new SuperMap3D.Cartesian3(t,o,n)}})),o((function(){return a.offsetY}),(function(e){if(a.selectedoffset){var t=Number(a.offsetX),o=Number(a.offsetY),n=Number(a.offsetZ);l.selectedTranslate=new SuperMap3D.Cartesian3(t,o,n)}})),o((function(){return a.offsetZ}),(function(e){if(a.selectedoffset){var t=Number(a.offsetX),o=Number(a.offsetY),n=Number(a.offsetZ);l.selectedTranslate=new SuperMap3D.Cartesian3(t,o,n)}})),o((function(){return a.polygonOffset}),(function(e){l&&(e?l.setPolygonoffset(Number(a.polygonOffsetFactor),Number(e)):l.setPolygonoffset(0,0))})),o((function(){return a.polygonOffsetFactor}),(function(e){l&&a.polygonOffset&&l.setPolygonoffset(Number(e),Number(a.polygonOffsetUnit))})),o((function(){return a.polygonOffsetUnit}),(function(e){l&&a.polygonOffset&&l.setPolygonoffset(Number(a.polygonOffsetFactor),Number(e))})),function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?O(Object(o),!0).forEach((function(t){v(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t(a))}var C={name:"Sm3dS3mlayerOperation",props:{selectedLayerName:{type:String},selectedoffset:{type:Boolean},offsetX:{type:Number},offsetY:{type:Number},offsetZ:{type:Number},polygonOffset:{type:Boolean},polygonOffsetFactor:{type:Number},polygonOffsetUnit:{type:Number}},setup:function(e){var t=P(e);return{layerNames:t.layerNames,selectedLayerName:t.selectedLayerName,selectedoffset:t.selectedoffset,offsetX:t.offsetX,offsetY:t.offsetY,offsetZ:t.offsetZ,polygonOffset:t.polygonOffset,polygonOffsetFactor:t.polygonOffsetFactor,polygonOffsetUnit:t.polygonOffsetUnit}}},M={id:"s3mlayer-attribute-panel",class:"sm-panel"},x={class:"sm-function-module-sub-section",style:{margin:"0"}},U={class:"sm-half-L"},Y={style:{width:"35%"}},Z={class:"sm-half-L"},E={style:{width:"100%"}},R={class:"sm-half-L"},X={style:{width:"35%"}},k={class:"sm-half-L"},B={style:{width:"35%"}},D={class:"sm-half-L"},F={style:{width:"35%"}};C.render=function(e,t,o,n,v,O){var w=r("el-slider"),h=s("stopdrag"),N=s("drag");return l((a(),f("div",M,[l(i("div",x,[i("div",U,[i("label",Y,c(e.Resource.selectedLayer),1),l(i("select",{class:"sm-select",style:{width:"63%"},"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.selectedLayerName=e})},[(a(!0),f(u,null,p(n.layerNames,(function(e,t){return a(),f("option",{key:t,value:e},c(e),9,["value"])})),128)),l(i("option",{value:"none"},c(e.Resource.noS3mLayer),513),[[d,0==n.layerNames.length]])],512),[[m,n.selectedLayerName]])]),i("div",Z,[i("label",E,[l(i("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return n.selectedoffset=e})},null,512),[[y,n.selectedoffset]]),g(" "+c(e.Resource.selectedoffset),1)]),i("div",R,[i("label",X,c(e.Resource.offsetX),1),i(w,{modelValue:n.offsetX,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.offsetX=e}),min:-50,max:50,step:1,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue"])]),i("div",k,[i("label",B,c(e.Resource.offsetY),1),i(w,{modelValue:n.offsetY,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.offsetY=e}),min:-50,max:50,step:1,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue"])]),i("div",D,[i("label",F,c(e.Resource.offsetZ),1),i(w,{modelValue:n.offsetZ,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.offsetZ=e}),min:-50,max:50,step:1,"input-size":"mini",debounce:500,"tooltip-class":"tooltip-class",style:{width:"63%"}},null,8,["modelValue"])])]),b(' <div class="sm-half-L">\r\n        <label style="width:100%">\r\n          <input type="checkbox" v-model="polygonOffset" />\r\n          {{Resource.polygonOffset}}\r\n        </label>\r\n        <div class="sm-half-L">\r\n          <label style="width: 35%;">{{Resource.polygonOffsetFactor}}</label>\r\n          <el-slider\r\n            v-model="polygonOffsetFactor "\r\n            :min="-20"\r\n            :max="20"\r\n            :step="1"\r\n            input-size="mini"\r\n            :debounce="500"\r\n            tooltip-class="tooltip-class"\r\n            style="width:63%"\r\n          ></el-slider>\r\n        </div>\r\n        <div class="sm-half-L">\r\n          <label style="width: 35%;">{{Resource.polygonOffsetUnit}}</label>\r\n          <el-slider\r\n            v-model="polygonOffsetUnit "\r\n            :min="0"\r\n            :max="20"\r\n            :step="1"\r\n            input-size="mini"\r\n            :debounce="500"\r\n            tooltip-class="tooltip-class"\r\n            style="width:63%"\r\n          ></el-slider>\r\n        </div>\r\n      </div> ')],512),[[h]])],512)),[[N]])},C.__file="src/components/layer/s3mlayer-operation/s3mlayer-operation.vue",C.install=function(e){e.component(C.name,C)};export default C;
