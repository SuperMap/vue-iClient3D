define(["exports","./when-b60132fc","./Cartesian2-c4c2a8f9","./Cartesian4-442405e6","./Cartographic-2cfa3a3a","./Math-3024ab74","./buildModuleUrl-c0836874","./WebGLConstants-aba9fc67","./FeatureDetection-caf5f946"],(function(e,a,t,n,r,i,s,o,u){"use strict";function l(e,t,n,r){this.x=a.defaultValue(e,0),this.y=a.defaultValue(t,0),this.z=a.defaultValue(n,0),this.w=a.defaultValue(r,0)}var d=new n.Cartesian3;l.fromAxisAngle=function(e,t,r){var i=t/2,s=Math.sin(i),o=(d=n.Cartesian3.normalize(e,d)).x*s,u=d.y*s,c=d.z*s,f=Math.cos(i);return a.defined(r)?(r.x=o,r.y=u,r.z=c,r.w=f,r):new l(o,u,c,f)};var c=[1,2,0],f=new Array(3);l.fromRotationMatrix=function(e,n){var r,i,s,o,u,d=e[t.Matrix3.COLUMN0ROW0],h=e[t.Matrix3.COLUMN1ROW1],m=e[t.Matrix3.COLUMN2ROW2],p=d+h+m;if(p>0)u=.5*(r=Math.sqrt(p+1)),r=.5/r,i=(e[t.Matrix3.COLUMN1ROW2]-e[t.Matrix3.COLUMN2ROW1])*r,s=(e[t.Matrix3.COLUMN2ROW0]-e[t.Matrix3.COLUMN0ROW2])*r,o=(e[t.Matrix3.COLUMN0ROW1]-e[t.Matrix3.COLUMN1ROW0])*r;else{var y=0;h>d&&(y=1),m>d&&m>h&&(y=2);var w=c[y],C=c[w];r=Math.sqrt(e[t.Matrix3.getElementIndex(y,y)]-e[t.Matrix3.getElementIndex(w,w)]-e[t.Matrix3.getElementIndex(C,C)]+1);var x=f;x[y]=.5*r,r=.5/r,u=(e[t.Matrix3.getElementIndex(C,w)]-e[t.Matrix3.getElementIndex(w,C)])*r,x[w]=(e[t.Matrix3.getElementIndex(w,y)]+e[t.Matrix3.getElementIndex(y,w)])*r,x[C]=(e[t.Matrix3.getElementIndex(C,y)]+e[t.Matrix3.getElementIndex(y,C)])*r,i=-x[0],s=-x[1],o=-x[2]}return a.defined(n)?(n.x=i,n.y=s,n.z=o,n.w=u,n):new l(i,s,o,u)};var h=new l,m=new l,p=new l,y=new l;l.fromHeadingPitchRoll=function(e,a){return y=l.fromAxisAngle(n.Cartesian3.UNIT_X,e.roll,h),p=l.fromAxisAngle(n.Cartesian3.UNIT_Y,-e.pitch,a),a=l.multiply(p,y,p),m=l.fromAxisAngle(n.Cartesian3.UNIT_Z,-e.heading,h),l.multiply(m,a,a)};var w=new n.Cartesian3,C=new n.Cartesian3,x=new l,_=new l,M=new l;l.packedLength=4,l.pack=function(e,t,n){return n=a.defaultValue(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},l.unpack=function(e,t,n){return t=a.defaultValue(t,0),a.defined(n)||(n=new l),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},l.packedInterpolationLength=3,l.convertPackedArrayForInterpolation=function(e,a,t,n){l.unpack(e,4*t,M),l.conjugate(M,M);for(var r=0,i=t-a+1;r<i;r++){var s=3*r;l.unpack(e,4*(a+r),x),l.multiply(x,M,x),x.w<0&&l.negate(x,x),l.computeAxis(x,w);var o=l.computeAngle(x);n[s]=w.x*o,n[s+1]=w.y*o,n[s+2]=w.z*o}},l.unpackInterpolationResult=function(e,t,r,i,s){a.defined(s)||(s=new l),n.Cartesian3.fromArray(e,0,C);var o=n.Cartesian3.magnitude(C);return l.unpack(t,4*i,_),0===o?l.clone(l.IDENTITY,x):l.fromAxisAngle(C,o,x),l.multiply(x,_,s)},l.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new l(e.x,e.y,e.z,e.w)},l.conjugate=function(e,a){return a.x=-e.x,a.y=-e.y,a.z=-e.z,a.w=e.w,a},l.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},l.magnitude=function(e){return Math.sqrt(l.magnitudeSquared(e))},l.normalize=function(e,a){var t=1/l.magnitude(e),n=e.x*t,r=e.y*t,i=e.z*t,s=e.w*t;return a.x=n,a.y=r,a.z=i,a.w=s,a},l.inverse=function(e,a){var t=l.magnitudeSquared(e);return a=l.conjugate(e,a),l.multiplyByScalar(a,1/t,a)},l.add=function(e,a,t){return t.x=e.x+a.x,t.y=e.y+a.y,t.z=e.z+a.z,t.w=e.w+a.w,t},l.subtract=function(e,a,t){return t.x=e.x-a.x,t.y=e.y-a.y,t.z=e.z-a.z,t.w=e.w-a.w,t},l.negate=function(e,a){return a.x=-e.x,a.y=-e.y,a.z=-e.z,a.w=-e.w,a},l.dot=function(e,a){return e.x*a.x+e.y*a.y+e.z*a.z+e.w*a.w},l.multiply=function(e,a,t){var n=e.x,r=e.y,i=e.z,s=e.w,o=a.x,u=a.y,l=a.z,d=a.w,c=s*o+n*d+r*l-i*u,f=s*u-n*l+r*d+i*o,h=s*l+n*u-r*o+i*d,m=s*d-n*o-r*u-i*l;return t.x=c,t.y=f,t.z=h,t.w=m,t},l.multiplyByVec=function(e,a,t){var r=new n.Cartesian3,i=new n.Cartesian3,s=new n.Cartesian3(e.x,e.y,e.z);r=n.Cartesian3.cross(s,a,r),i=n.Cartesian3.cross(s,r,i);var o=new n.Cartesian3;o=n.Cartesian3.multiplyByScalar(r,2*e.w,o);var u=new n.Cartesian3;return u=n.Cartesian3.multiplyByScalar(r,2,u),t=n.Cartesian3.add(a,o,t),t=n.Cartesian3.add(t,u,t)},l.multiplyByScalar=function(e,a,t){return t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t.w=e.w*a,t},l.divideByScalar=function(e,a,t){return t.x=e.x/a,t.y=e.y/a,t.z=e.z/a,t.w=e.w/a,t},l.computeAxis=function(e,a){var t=e.w;if(Math.abs(t-1)<i.CesiumMath.EPSILON6)return a.x=a.y=a.z=0,a;var n=1/Math.sqrt(1-t*t);return a.x=e.x*n,a.y=e.y*n,a.z=e.z*n,a},l.computeAngle=function(e){return Math.abs(e.w-1)<i.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var E=new l;l.lerp=function(e,a,t,n){return E=l.multiplyByScalar(a,t,E),n=l.multiplyByScalar(e,1-t,n),l.add(E,n,n)};var O=new l,S=new l,v=new l;l.slerp=function(e,a,t,n){var r=l.dot(e,a),s=a;if(r<0&&(r=-r,s=O=l.negate(a,O)),1-r<i.CesiumMath.EPSILON6)return l.lerp(e,s,t,n);var o=Math.acos(r);return S=l.multiplyByScalar(e,Math.sin((1-t)*o),S),v=l.multiplyByScalar(s,Math.sin(t*o),v),n=l.add(S,v,n),l.multiplyByScalar(n,1/Math.sin(o),n)},l.log=function(e,a){var t=i.CesiumMath.acosClamped(e.w),r=0;return 0!==t&&(r=t/Math.sin(t)),n.Cartesian3.multiplyByScalar(e,r,a)},l.exp=function(e,a){var t=n.Cartesian3.magnitude(e),r=0;return 0!==t&&(r=Math.sin(t)/t),a.x=e.x*r,a.y=e.y*r,a.z=e.z*r,a.w=Math.cos(t),a};var D=new n.Cartesian3,T=new n.Cartesian3,P=new l,g=new l;l.computeInnerQuadrangle=function(e,a,t,r){var i=l.conjugate(a,P);l.multiply(i,t,g);var s=l.log(g,D);l.multiply(i,e,g);var o=l.log(g,T);return n.Cartesian3.add(s,o,s),n.Cartesian3.multiplyByScalar(s,.25,s),n.Cartesian3.negate(s,s),l.exp(s,P),l.multiply(a,P,r)},l.squad=function(e,a,t,n,r,i){var s=l.slerp(e,a,r,P),o=l.slerp(t,n,r,g);return l.slerp(s,o,2*r*(1-r),i)};for(var N=new l,R=1.9011074535173003,I=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],A=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],U=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],z=u.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],F=0;F<7;++F){var b=F+1,W=2*b+1;I[F]=1/(b*W),A[F]=b/W}function q(e,a,t){for(var n,r,i=0,s=e.length-1;i<=s;)if((r=t(e[n=~~((i+s)/2)],a))<0)i=n+1;else{if(!(r>0))return n;s=n-1}return~(s+1)}function L(e,a,t,n,r){this.xPoleWander=e,this.yPoleWander=a,this.xPoleOffset=t,this.yPoleOffset=n,this.ut1MinusUtc=r}
/**
    @license
    sprintf.js from the php.js project - https://github.com/kvz/phpjs
    Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

    php.js is copyright 2012 Kevin van Zonneveld.

    Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
    (http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
    (http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
    Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
    Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
    Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
    Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
    L. Rodrigues (http://www.jsfromhell.com), Ash Searle
    (http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
    Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
    Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
    http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
    Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
    (http://webdevhobo.blogspot.com/), marrtins, GeekFG
    (http://geekfg.blogspot.com), Andrea Giammarchi
    (http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
    gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
    Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
    (http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
    Marc Palau, Martin
    (http://www.erlenwiese.de/), Breaking Par Consulting Inc
    (http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
    Chris, Mirek Slugen, saulius, Alfonso Jimenez
    (http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
    Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
    Ariede (http://caioariede.com), Robin, Kankrelune
    (http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
    (http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
    Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
    David, Aman Gupta, Michael White, Public Domain
    (http://www.json.org/json2.js), Steven Levithan
    (http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
    Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
    Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
    (http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
    Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
    Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
    (http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
    (http://javascript.crockford.com), madipta, Slawomir Kaniecki,
    ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
    (http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
    Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
    Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
    (http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
    josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
    Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
    (http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
    (http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
    Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
    (http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
    (http://yass.meetcweb.com), Peter-Paul Koch
    (http://www.quirksmode.org/js/beat.html), Olivier Louvignes
    (http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
    Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
    vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
    Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
    (http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
    B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
    (http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
    Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
    Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
    (http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
    Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
    Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
    sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
    Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
    (http://www.premasolutions.com/), Philippe Jausions
    (http://pear.php.net/user/jausions), Aidan Lister
    (http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
    strcmp, Taras Bogach, jpfle, Alexander Ermolaev
    (http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
    dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
    (http://www.pedrotainha.com), James, Arnout Kazemier
    (http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
    FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
    Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
    daniel airton wermann (http://wermann.com.br), Atli T¨®r, Maximusya, Ryan
    W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
    (http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
    Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
    (http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
    Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
    Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
    (http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
    Russell Walker (http://www.nbill.co.uk/), Jamie Beck
    (http://www.terabit.ca/), setcookie, Michael, YUI Library:
    http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
    http://hacks.bluesmoon.info/strftime/strftime.js, Ben
    (http://benblume.co.uk/), DtTvB
    (http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
    meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
    (http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
    Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
    Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
    Bryan

    Licensed under the MIT (MIT-LICENSE.txt) license.

    Permission is hereby granted, free of charge, to any person obtaining a
    copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
    OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
    ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.
    */function V(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,a=arguments,t=0,n=a[t++],r=function(e,a,t,n){t||(t=" ");var r=e.length>=a?"":Array(1+a-e.length>>>0).join(t);return n?e+r:r+e},i=function(e,a,t,n,i,s){var o=n-e.length;return o>0&&(e=t||!i?r(e,n,s,t):e.slice(0,a.length)+r("",o,"0",!0)+e.slice(a.length)),e},s=function(e,a,t,n,s,o,u){var l=e>>>0;return e=(t=t&&l&&{2:"0b",8:"0",16:"0x"}[a]||"")+r(l.toString(a),o||0,"0",!1),i(e,t,n,s,u)},o=function(e,a,t,n,r,s){return null!=n&&(e=e.slice(0,n)),i(e,"",a,t,r,s)},u=function(e,n,u,l,d,c,f){var h,m,p,y,w;if("%%"==e)return"%";for(var C=!1,x="",_=!1,M=!1,E=" ",O=u.length,S=0;u&&S<O;S++)switch(u.charAt(S)){case" ":x=" ";break;case"+":x="+";break;case"-":C=!0;break;case"'":E=u.charAt(S+1);break;case"0":_=!0;break;case"#":M=!0}if((l=l?"*"==l?+a[t++]:"*"==l.charAt(0)?+a[l.slice(1,-1)]:+l:0)<0&&(l=-l,C=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(c=c?"*"==c?+a[t++]:"*"==c.charAt(0)?+a[c.slice(1,-1)]:+c:"fFeE".indexOf(f)>-1?6:"d"==f?0:void 0,w=n?a[n.slice(0,-1)]:a[t++],f){case"s":return o(String(w),C,l,c,_,E);case"c":return o(String.fromCharCode(+w),C,l,c,_);case"b":return s(w,2,M,C,l,c,_);case"o":return s(w,8,M,C,l,c,_);case"x":return s(w,16,M,C,l,c,_);case"X":return s(w,16,M,C,l,c,_).toUpperCase();case"u":return s(w,10,M,C,l,c,_);case"i":case"d":return h=+w||0,w=(m=(h=Math.round(h-h%1))<0?"-":x)+r(String(Math.abs(h)),c,"0",!1),i(w,m,C,l,_);case"e":case"E":case"f":case"F":case"g":case"G":return m=(h=+w)<0?"-":x,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(f.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(f)%2],w=m+Math.abs(h)[p](c),i(w,m,C,l,_)[y]();default:return e}};return n.replace(e,u)}function k(e,a,t,n,r,i,s,o){this.year=e,this.month=a,this.day=t,this.hour=n,this.minute=r,this.second=i,this.millisecond=s,this.isLeapSecond=o}function Y(e){return e%4==0&&e%100!=0||e%400==0}function B(e,a){this.julianDate=e,this.offset=a}I[7]=R/136,A[7]=8*R/17,l.fastSlerp=function(e,a,t,n){var r,i=l.dot(e,a);i>=0?r=1:(r=-1,i=-i);for(var s=i-1,o=1-t,u=t*t,d=o*o,c=7;c>=0;--c)U[c]=(I[c]*u-A[c])*s,z[c]=(I[c]*d-A[c])*s;var f=r*t*(1+U[0]*(1+U[1]*(1+U[2]*(1+U[3]*(1+U[4]*(1+U[5]*(1+U[6]*(1+U[7])))))))),h=o*(1+z[0]*(1+z[1]*(1+z[2]*(1+z[3]*(1+z[4]*(1+z[5]*(1+z[6]*(1+z[7])))))))),m=l.multiplyByScalar(e,h,N);return l.multiplyByScalar(a,f,n),l.add(m,n,n)},l.fastSquad=function(e,a,t,n,r,i){var s=l.fastSlerp(e,a,r,P),o=l.fastSlerp(t,n,r,g);return l.fastSlerp(s,o,2*r*(1-r),i)},l.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},l.equalsEpsilon=function(e,t,n){return e===t||a.defined(e)&&a.defined(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},l.ZERO=Object.freeze(new l(0,0,0,0)),l.IDENTITY=Object.freeze(new l(0,0,0,1)),l.prototype.clone=function(e){return l.clone(this,e)},l.prototype.equals=function(e){return l.equals(this,e)},l.prototype.equalsEpsilon=function(e,a){return l.equalsEpsilon(this,e,a)},l.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var j=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),G=Object.freeze({UTC:0,TAI:1}),Z=new k,X=[31,28,31,30,31,30,31,31,30,31,30,31];function J(e,a){return de.compare(e.julianDate,a.julianDate)}var H=new B;function $(e){H.julianDate=e;var a=de.leapSeconds,t=q(a,H,J);t<0&&(t=~t),t>=a.length&&(t=a.length-1);var n=a[t].offset;t>0&&(de.secondsDifference(a[t].julianDate,e)>n&&(n=a[--t].offset));de.addSeconds(e,n,e)}function Q(e,a){H.julianDate=e;var t=de.leapSeconds,n=q(t,H,J);if(n<0&&(n=~n),0===n)return de.addSeconds(e,-t[0].offset,a);if(n>=t.length)return de.addSeconds(e,-t[n-1].offset,a);var r=de.secondsDifference(t[n].julianDate,e);return 0===r?de.addSeconds(e,-t[n].offset,a):r<=1?void 0:de.addSeconds(e,-t[--n].offset,a)}function K(e,a,t){var n=a/j.SECONDS_PER_DAY|0;return e+=n,(a-=j.SECONDS_PER_DAY*n)<0&&(e--,a+=j.SECONDS_PER_DAY),t.dayNumber=e,t.secondsOfDay=a,t}function ee(e,a,t,n,r,i,s){var o=(a-14)/12|0,u=e+4800+o,l=(1461*u/4|0)+(367*(a-2-12*o)/12|0)-(3*((u+100)/100|0)/4|0)+t-32075;(n-=12)<0&&(n+=24);var d=i+(n*j.SECONDS_PER_HOUR+r*j.SECONDS_PER_MINUTE+s*j.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var ae=/^(\d{4})$/,te=/^(\d{4})-(\d{2})$/,ne=/^(\d{4})-?(\d{3})$/,re=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ie=/^(\d{4})-?(\d{2})-?(\d{2})$/,se=/([Z+\-])?(\d{2})?:?(\d{2})?$/,oe=/^(\d{2})(\.\d+)?/.source+se.source,ue=/^(\d{2}):?(\d{2})(\.\d+)?/.source+se.source,le=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+se.source;function de(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=a.defaultValue(e,0),t=a.defaultValue(t,0),n=a.defaultValue(n,G.UTC);var r=0|e;K(r,t+=(e-r)*j.SECONDS_PER_DAY,this),n===G.UTC&&$(this)}de.fromGregorianDate=function(e,t){var n=ee(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return a.defined(t)?(K(n[0],n[1],t),$(t),t):new de(n[0],n[1],G.UTC)},de.fromDate=function(e,t){var n=ee(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return a.defined(t)?(K(n[0],n[1],t),$(t),t):new de(n[0],n[1],G.UTC)},de.fromIso8601=function(e,t){var n,r,i,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,c=0,f=0,h=0,m=o[0],p=o[1];if(null!==(o=m.match(ie)))n=+o[1],u=+o[2],l=+o[3];else if(null!==(o=m.match(te)))n=+o[1],u=+o[2];else if(null!==(o=m.match(ae)))n=+o[1];else{var y;if(null!==(o=m.match(ne)))n=+o[1],y=+o[2],i=Y(n);else if(null!==(o=m.match(re)))n=+o[1],y=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(n,0,4)).getUTCDay()-3;(r=new Date(Date.UTC(n,0,1))).setUTCDate(y),u=r.getUTCMonth()+1,l=r.getUTCDate()}if(i=Y(n),a.defined(p)){null!==(o=p.match(le))?(d=+o[1],c=+o[2],f=+o[3],h=1e3*+(o[4]||0),s=5):null!==(o=p.match(ue))?(d=+o[1],c=+o[2],f=60*+(o[3]||0),s=4):null!==(o=p.match(oe))&&(d=+o[1],c=60*+(o[2]||0),s=3);var w=o[s],C=+o[s+1],x=+(o[s+2]||0);switch(w){case"+":d-=C,c-=x;break;case"-":d+=C,c+=x;break;case"Z":break;default:c+=new Date(Date.UTC(n,u-1,l,d,c)).getTimezoneOffset()}}var _=60===f;for(_&&f--;c>=60;)c-=60,d++;for(;d>=24;)d-=24,l++;for(r=i&&2===u?29:X[u-1];l>r;)l-=r,++u>12&&(u-=12,n++),r=i&&2===u?29:X[u-1];for(;c<0;)c+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,n--),l+=r=i&&2===u?29:X[u-1];var M=ee(n,u,l,d,c,f,h);return a.defined(t)?(K(M[0],M[1],t),$(t)):t=new de(M[0],M[1],G.UTC),_&&de.addSeconds(t,1,t),t},de.now=function(e){return de.fromDate(new Date,e)};var ce=new de(0,0,G.TAI);function fe(e){if(e=a.defaultValue(e,a.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=a.defaultValue(e.addNewLeapSeconds,!0),a.defined(e.data))me(this,e.data);else if(a.defined(e.url)){var t=s.Resource.createIfNeeded(e.url),n=this;this._downloadPromise=a.when(t.fetchJson(),(function(e){me(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."}))}else me(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function he(e,a){return de.compare(e.julianDate,a)}function me(e,t){if(a.defined(t.columnNames))if(a.defined(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),s=t.columnNames.indexOf("ut1MinusUtcSeconds"),o=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||i<0||s<0||o<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var d,c=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=s,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,m=0,p=c.length;m<p;m+=e._columnCount){var y=c[m+n],w=c[m+l],C=new de(y+j.MODIFIED_JULIAN_DATE_DIFFERENCE,w,G.TAI);if(f.push(C),h){if(w!==d&&a.defined(d)){var x=de.leapSeconds,_=q(x,C,he);if(_<0){var M=new B(C,w);x.splice(~_,0,M)}}d=w}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function pe(e,a,t,n,r){var i=t*n;r.xPoleWander=a[i+e._xPoleWanderRadiansColumn],r.yPoleWander=a[i+e._yPoleWanderRadiansColumn],r.xPoleOffset=a[i+e._xCelestialPoleOffsetRadiansColumn],r.yPoleOffset=a[i+e._yCelestialPoleOffsetRadiansColumn],r.ut1MinusUtc=a[i+e._ut1MinusUtcSecondsColumn]}function ye(e,a,t){return a+e*(t-a)}function we(e,a,t,n,r,i,s){var o=e._columnCount;if(i>a.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=a[r],l=a[i];if(u.equals(l)||n.equals(u))return pe(e,t,r,o,s),s;if(n.equals(l))return pe(e,t,i,o,s),s;var d=de.secondsDifference(n,u)/de.secondsDifference(l,u),c=r*o,f=i*o,h=t[c+e._ut1MinusUtcSecondsColumn],m=t[f+e._ut1MinusUtcSecondsColumn],p=m-h;if(p>.5||p<-.5){var y=t[c+e._taiMinusUtcSecondsColumn],w=t[f+e._taiMinusUtcSecondsColumn];y!==w&&(l.equals(n)?h=m:m-=w-y)}return s.xPoleWander=ye(d,t[c+e._xPoleWanderRadiansColumn],t[f+e._xPoleWanderRadiansColumn]),s.yPoleWander=ye(d,t[c+e._yPoleWanderRadiansColumn],t[f+e._yPoleWanderRadiansColumn]),s.xPoleOffset=ye(d,t[c+e._xCelestialPoleOffsetRadiansColumn],t[f+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=ye(d,t[c+e._yCelestialPoleOffsetRadiansColumn],t[f+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=ye(d,h,m),s}function Ce(e,t,n){this.heading=a.defaultValue(e,0),this.pitch=a.defaultValue(t,0),this.roll=a.defaultValue(n,0)}function xe(e,a,t){this.x=e,this.y=a,this.s=t}function _e(e){e=a.defaultValue(e,a.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=s.Resource.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=a.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=a.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new de(this._sampleZeroJulianEphemerisDate,0,G.TAI),this._stepSizeDays=a.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=a.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=a.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),i=Math.pow(this._stepSizeDays,t),o=0;o<=t;++o){n[o]=i,r[o]=o*this._stepSizeDays;for(var u=0;u<=t;++u)u!==o&&(n[o]*=o-u);n[o]=1/n[o]}this._work=new Array(t+1),this._coef=new Array(t+1)}de.toGregorianDate=function(e,t){var n=!1,r=Q(e,ce);a.defined(r)||(de.addSeconds(e,-1,ce),r=Q(ce,ce),n=!0);var i=r.dayNumber,s=r.secondsOfDay;s>=43200&&(i+=1);var o=i+68569|0,u=4*o/146097|0,l=4e3*((o=o-((146097*u+3)/4|0)|0)+1)/1461001|0,d=80*(o=o-(1461*l/4|0)+31|0)/2447|0,c=o-(2447*d/80|0)|0,f=d+2-12*(o=d/11|0)|0,h=100*(u-49)+l+o|0,m=s/j.SECONDS_PER_HOUR|0,p=s-m*j.SECONDS_PER_HOUR,y=p/j.SECONDS_PER_MINUTE|0,w=0|(p-=y*j.SECONDS_PER_MINUTE),C=(p-w)/j.SECONDS_PER_MILLISECOND;return(m+=12)>23&&(m-=24),n&&(w+=1),a.defined(t)?(t.year=h,t.month=f,t.day=c,t.hour=m,t.minute=y,t.second=w,t.millisecond=C,t.isLeapSecond=n,t):new k(h,f,c,m,y,w,C,n)},de.toDate=function(e){var a=de.toGregorianDate(e,Z),t=a.second;return a.isLeapSecond&&(t-=1),new Date(Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,t,a.millisecond))},de.toIso8601=function(e,t){var n=de.toGregorianDate(e,Z),r=n.year,i=n.month,s=n.day,o=n.hour,u=n.minute,l=n.second,d=n.millisecond;return 1e4===r&&1===i&&1===s&&0===o&&0===u&&0===l&&0===d&&(r=9999,i=12,s=31,o=24),a.defined(t)||0===d?a.defined(t)&&0!==t?V("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,s,o,u,l,(.01*d).toFixed(t).replace(".","").slice(0,t)):V("%04d-%02d-%02dT%02d:%02d:%02dZ",r,i,s,o,u,l):V("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,s,o,u,l,(.01*d).toString().replace(".",""))},de.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new de(e.dayNumber,e.secondsOfDay,G.TAI)},de.compare=function(e,a){var t=e.dayNumber-a.dayNumber;return 0!==t?t:e.secondsOfDay-a.secondsOfDay},de.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},de.equalsEpsilon=function(e,t,n){return e===t||a.defined(e)&&a.defined(t)&&Math.abs(de.secondsDifference(e,t))<=n},de.totalDays=function(e){return e.dayNumber+e.secondsOfDay/j.SECONDS_PER_DAY},de.secondsDifference=function(e,a){return(e.dayNumber-a.dayNumber)*j.SECONDS_PER_DAY+(e.secondsOfDay-a.secondsOfDay)},de.daysDifference=function(e,a){return e.dayNumber-a.dayNumber+(e.secondsOfDay-a.secondsOfDay)/j.SECONDS_PER_DAY},de.computeTaiMinusUtc=function(e){H.julianDate=e;var a=de.leapSeconds,t=q(a,H,J);return t<0&&(t=~t,--t<0&&(t=0)),a[t].offset},de.addSeconds=function(e,a,t){return K(e.dayNumber,e.secondsOfDay+a,t)},de.addMinutes=function(e,a,t){var n=e.secondsOfDay+a*j.SECONDS_PER_MINUTE;return K(e.dayNumber,n,t)},de.addHours=function(e,a,t){var n=e.secondsOfDay+a*j.SECONDS_PER_HOUR;return K(e.dayNumber,n,t)},de.addDays=function(e,a,t){return K(e.dayNumber+a,e.secondsOfDay,t)},de.lessThan=function(e,a){return de.compare(e,a)<0},de.lessThanOrEquals=function(e,a){return de.compare(e,a)<=0},de.greaterThan=function(e,a){return de.compare(e,a)>0},de.greaterThanOrEquals=function(e,a){return de.compare(e,a)>=0},de.prototype.clone=function(e){return de.clone(this,e)},de.prototype.equals=function(e){return de.equals(this,e)},de.prototype.equalsEpsilon=function(e,a){return de.equalsEpsilon(this,e,a)},de.prototype.toString=function(){return de.toIso8601(this)},de.leapSeconds=[new B(new de(2441317,43210,G.TAI),10),new B(new de(2441499,43211,G.TAI),11),new B(new de(2441683,43212,G.TAI),12),new B(new de(2442048,43213,G.TAI),13),new B(new de(2442413,43214,G.TAI),14),new B(new de(2442778,43215,G.TAI),15),new B(new de(2443144,43216,G.TAI),16),new B(new de(2443509,43217,G.TAI),17),new B(new de(2443874,43218,G.TAI),18),new B(new de(2444239,43219,G.TAI),19),new B(new de(2444786,43220,G.TAI),20),new B(new de(2445151,43221,G.TAI),21),new B(new de(2445516,43222,G.TAI),22),new B(new de(2446247,43223,G.TAI),23),new B(new de(2447161,43224,G.TAI),24),new B(new de(2447892,43225,G.TAI),25),new B(new de(2448257,43226,G.TAI),26),new B(new de(2448804,43227,G.TAI),27),new B(new de(2449169,43228,G.TAI),28),new B(new de(2449534,43229,G.TAI),29),new B(new de(2450083,43230,G.TAI),30),new B(new de(2450630,43231,G.TAI),31),new B(new de(2451179,43232,G.TAI),32),new B(new de(2453736,43233,G.TAI),33),new B(new de(2454832,43234,G.TAI),34),new B(new de(2456109,43235,G.TAI),35),new B(new de(2457204,43236,G.TAI),36),new B(new de(2457754,43237,G.TAI),37)],fe.NONE=Object.freeze({getPromiseToLoad:function(){return a.when()},compute:function(e,t){return a.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new L(0,0,0,0,0),t}}),fe.prototype.getPromiseToLoad=function(){return a.when(this._downloadPromise)},fe.prototype.compute=function(e,t){if(a.defined(this._samples)){if(a.defined(t)||(t=new L(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,r=this._lastIndex,i=0,s=0;if(a.defined(r)){var u=n[r],l=n[r+1],d=de.lessThanOrEquals(u,e),c=!a.defined(l),f=c||de.greaterThanOrEquals(l,e);if(d&&f)return i=r,!c&&l.equals(e)&&++i,s=i+1,we(this,n,this._samples,e,i,s,t),t}var h=q(n,e,de.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(e)&&++h,i=h,s=h):(i=(s=~h)-1)<0&&(i=0),this._lastIndex=i,we(this,n,this._samples,e,i,s,t),t}if(a.defined(this._dataError))throw new o.RuntimeError(this._dataError)},Ce.fromQuaternion=function(e,t){a.defined(t)||(t=new Ce);var n=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),s=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),u=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(u,o),t.roll=Math.atan2(s,r),t.pitch=-i.CesiumMath.asinClamped(n),t},Ce.fromDegrees=function(e,t,n,r){return a.defined(r)||(r=new Ce),r.heading=e*i.CesiumMath.RADIANS_PER_DEGREE,r.pitch=t*i.CesiumMath.RADIANS_PER_DEGREE,r.roll=n*i.CesiumMath.RADIANS_PER_DEGREE,r},Ce.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Ce(e.heading,e.pitch,e.roll)},Ce.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Ce.equalsEpsilon=function(e,t,n,r){return e===t||a.defined(e)&&a.defined(t)&&i.CesiumMath.equalsEpsilon(e.heading,t.heading,n,r)&&i.CesiumMath.equalsEpsilon(e.pitch,t.pitch,n,r)&&i.CesiumMath.equalsEpsilon(e.roll,t.roll,n,r)},Ce.prototype.clone=function(e){return Ce.clone(this,e)},Ce.prototype.equals=function(e){return Ce.equals(this,e)},Ce.prototype.equalsEpsilon=function(e,a,t){return Ce.equalsEpsilon(this,e,a,t)},Ce.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Me=new de(0,0,G.TAI);function Ee(e,a,t){var n=Me;return n.dayNumber=a,n.secondsOfDay=t,de.daysDifference(n,e._sampleZeroDateTT)}function Oe(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];var n,r=a.when.defer();e._chunkDownloadsInProgress[t]=r;var i=e._xysFileUrlTemplate;return n=a.defined(i)?i.getDerivedResource({templateValues:{0:t}}):new s.Resource({url:s.buildModuleUrl("Assets/IAU2006_XYS/IAU2006_XYS_"+t+".json")}),a.when(n.fetchJson(),(function(a){e._chunkDownloadsInProgress[t]=!1;for(var n=e._samples,i=a.samples,s=t*e._samplesPerXysFile*3,o=0,u=i.length;o<u;++o)n[s+o]=i[o];r.resolve()})),r.promise}_e.prototype.preload=function(e,t,n,r){var i=Ee(this,e,t),s=Ee(this,n,r),o=i/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);var u=s/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=o/this._samplesPerXysFile|0,d=u/this._samplesPerXysFile|0,c=[],f=l;f<=d;++f)c.push(Oe(this,f));return a.when.all(c)},_e.prototype.computeXysRadians=function(e,t,n){var r=Ee(this,e,t);if(!(r<0)){var i=r/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var s=this._interpolationOrder,o=i-(s/2|0);o<0&&(o=0);var u=o+s;u>=this._totalSamples&&(o=(u=this._totalSamples-1)-s)<0&&(o=0);var l=!1,d=this._samples;if(a.defined(d[3*o])||(Oe(this,o/this._samplesPerXysFile|0),l=!0),a.defined(d[3*u])||(Oe(this,u/this._samplesPerXysFile|0),l=!0),!l){a.defined(n)?(n.x=0,n.y=0,n.s=0):n=new xe(0,0,0);var c,f,h=r-o*this._stepSizeDays,m=this._work,p=this._denominators,y=this._coef,w=this._xTable;for(c=0;c<=s;++c)m[c]=h-w[c];for(c=0;c<=s;++c){for(y[c]=1,f=0;f<=s;++f)f!==c&&(y[c]*=m[f]);y[c]*=p[c];var C=3*(o+c);n.x+=y[c]*d[C++],n.y+=y[c]*d[C++],n.s+=y[c]*d[C]}return n}}}};var Se={},ve={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},De={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Te={},Pe={east:new n.Cartesian3,north:new n.Cartesian3,up:new n.Cartesian3,west:new n.Cartesian3,south:new n.Cartesian3,down:new n.Cartesian3},ge=new n.Cartesian3,Ne=new n.Cartesian3,Re=new n.Cartesian3;Se.localFrameToFixedFrameGenerator=function(e,r){if(!ve.hasOwnProperty(e)||!ve[e].hasOwnProperty(r))throw new i.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var o,u=ve[e][r],l=e+r;return a.defined(Te[l])?o=Te[l]:(o=function(o,l,d){if(a.defined(d)||(d=new t.Matrix4),n.Cartesian3.equalsEpsilon(o,n.Cartesian3.ZERO,i.CesiumMath.EPSILON14))n.Cartesian3.unpack(De[e],0,ge),n.Cartesian3.unpack(De[r],0,Ne),n.Cartesian3.unpack(De[u],0,Re);else if(i.CesiumMath.equalsEpsilon(o.x,0,i.CesiumMath.EPSILON14)&&i.CesiumMath.equalsEpsilon(o.y,0,i.CesiumMath.EPSILON14)){var c=i.CesiumMath.sign(o.z);n.Cartesian3.unpack(De[e],0,ge),"east"!==e&&"west"!==e&&n.Cartesian3.multiplyByScalar(ge,c,ge),n.Cartesian3.unpack(De[r],0,Ne),"east"!==r&&"west"!==r&&n.Cartesian3.multiplyByScalar(Ne,c,Ne),n.Cartesian3.unpack(De[u],0,Re),"east"!==u&&"west"!==u&&n.Cartesian3.multiplyByScalar(Re,c,Re)}else{(l=a.defaultValue(l,s.Ellipsoid.WGS84)).geodeticSurfaceNormal(o,Pe.up);var f=Pe.up,h=Pe.east;h.x=-o.y,h.y=o.x,h.z=0,n.Cartesian3.normalize(h,Pe.east),n.Cartesian3.cross(f,h,Pe.north),n.Cartesian3.multiplyByScalar(Pe.up,-1,Pe.down),n.Cartesian3.multiplyByScalar(Pe.east,-1,Pe.west),n.Cartesian3.multiplyByScalar(Pe.north,-1,Pe.south),ge=Pe[e],Ne=Pe[r],Re=Pe[u]}return d[0]=ge.x,d[1]=ge.y,d[2]=ge.z,d[3]=0,d[4]=Ne.x,d[5]=Ne.y,d[6]=Ne.z,d[7]=0,d[8]=Re.x,d[9]=Re.y,d[10]=Re.z,d[11]=0,d[12]=o.x,d[13]=o.y,d[14]=o.z,d[15]=1,d},Te[l]=o),o},Se.eastNorthUpToFixedFrame=Se.localFrameToFixedFrameGenerator("east","north"),Se.northEastDownToFixedFrame=Se.localFrameToFixedFrameGenerator("north","east"),Se.northUpEastToFixedFrame=Se.localFrameToFixedFrameGenerator("north","up"),Se.northWestUpToFixedFrame=Se.localFrameToFixedFrameGenerator("north","west");var Ie=new l,Ae=new n.Cartesian3(1,1,1),Ue=new t.Matrix4;Se.headingPitchRollToFixedFrame=function(e,r,i,s,o){s=a.defaultValue(s,Se.eastNorthUpToFixedFrame);var u=l.fromHeadingPitchRoll(r,Ie),d=t.Matrix4.fromTranslationQuaternionRotationScale(n.Cartesian3.ZERO,u,Ae,Ue);return o=s(e,i,o),t.Matrix4.multiply(o,d,o)};var ze=new t.Matrix4,Fe=new t.Matrix3;Se.headingPitchRollQuaternion=function(e,a,n,r,i){var s=Se.headingPitchRollToFixedFrame(e,a,n,r,ze),o=t.Matrix4.getMatrix3(s,Fe);return l.fromRotationMatrix(o,i)};var be=new n.Cartesian3(1,1,1),We=new n.Cartesian3,qe=new t.Matrix4,Le=new t.Matrix4,Ve=new t.Matrix3,ke=new l;Se.fixedFrameToHeadingPitchRoll=function(e,r,i,o){r=a.defaultValue(r,s.Ellipsoid.WGS84),i=a.defaultValue(i,Se.eastNorthUpToFixedFrame),a.defined(o)||(o=new Ce);var u=t.Matrix4.getTranslation(e,We);if(n.Cartesian3.equals(u,n.Cartesian3.ZERO))return o.heading=0,o.pitch=0,o.roll=0,o;var d=t.Matrix4.inverseTransformation(i(u,r,qe),qe),c=t.Matrix4.setScale(e,be,Le);c=t.Matrix4.setTranslation(c,n.Cartesian3.ZERO,c),d=t.Matrix4.multiply(d,c,d);var f=l.fromRotationMatrix(t.Matrix4.getMatrix3(d,Ve),ke);return f=l.normalize(f,f),Ce.fromQuaternion(f,o)};var Ye=i.CesiumMath.TWO_PI/86400,Be=new de;Se.computeTemeToPseudoFixedMatrix=function(e,n){var r,s=(Be=de.addSeconds(e,-de.computeTaiMinusUtc(e),Be)).dayNumber,o=Be.secondsOfDay,u=s-2451545,l=(24110.54841+(r=o>=43200?(u+.5)/j.DAYS_PER_JULIAN_CENTURY:(u-.5)/j.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+r*(.093104+-62e-7*r)))*Ye%i.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(s-2451545.5))*((o+.5*j.SECONDS_PER_DAY)%j.SECONDS_PER_DAY),d=Math.cos(l),c=Math.sin(l);return a.defined(n)?(n[0]=d,n[1]=-c,n[2]=0,n[3]=c,n[4]=d,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new t.Matrix3(d,c,0,-c,d,0,0,0,1)},Se.iau2006XysData=new _e,Se.earthOrientationParameters=fe.NONE;var je=32.184;Se.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+je,r=e.stop.dayNumber,i=e.stop.secondsOfDay+je,s=Se.iau2006XysData.preload(t,n,r,i),o=Se.earthOrientationParameters.getPromiseToLoad();return a.when.all([s,o])},Se.computeIcrfToFixedMatrix=function(e,n){a.defined(n)||(n=new t.Matrix3);var r=Se.computeFixedToIcrfMatrix(e,n);if(a.defined(r))return t.Matrix3.transpose(r,n)};var Ge=new xe(0,0,0),Ze=new L(0,0,0,0,0,0),Xe=new t.Matrix3,Je=new t.Matrix3;Se.computeFixedToIcrfMatrix=function(e,n){a.defined(n)||(n=new t.Matrix3);var r=Se.earthOrientationParameters.compute(e,Ze);if(a.defined(r)){var s=e.dayNumber,o=e.secondsOfDay+je,u=Se.iau2006XysData.computeXysRadians(s,o,Ge);if(a.defined(u)){var l=u.x+r.xPoleOffset,d=u.y+r.yPoleOffset,c=1/(1+Math.sqrt(1-l*l-d*d)),f=Xe;f[0]=1-c*l*l,f[3]=-c*l*d,f[6]=l,f[1]=-c*l*d,f[4]=1-c*d*d,f[7]=d,f[2]=-l,f[5]=-d,f[8]=1-c*(l*l+d*d);var h=t.Matrix3.fromRotationZ(-u.s,Je),m=t.Matrix3.multiply(f,h,Xe),p=e.dayNumber-2451545,y=(e.secondsOfDay-de.computeTaiMinusUtc(e)+r.ut1MinusUtc)/j.SECONDS_PER_DAY,w=.779057273264+y+.00273781191135448*(p+y);w=w%1*i.CesiumMath.TWO_PI;var C=t.Matrix3.fromRotationZ(w,Je),x=t.Matrix3.multiply(m,C,Xe),_=Math.cos(r.xPoleWander),M=Math.cos(r.yPoleWander),E=Math.sin(r.xPoleWander),O=Math.sin(r.yPoleWander),S=s-2451545+o/j.SECONDS_PER_DAY,v=-47e-6*(S/=36525)*i.CesiumMath.RADIANS_PER_DEGREE/3600,D=Math.cos(v),T=Math.sin(v),P=Je;return P[0]=_*D,P[1]=_*T,P[2]=E,P[3]=-M*T+O*E*D,P[4]=M*D+O*E*T,P[5]=-O*_,P[6]=-O*T-M*E*D,P[7]=O*D-M*E*T,P[8]=M*_,t.Matrix3.multiply(x,P,n)}}};var He=new n.Cartesian4;Se.pointToWindowCoordinates=function(e,a,t,n){return(n=Se.pointToGLWindowCoordinates(e,a,t,n)).y=2*a[5]-n.y,n},Se.pointToGLWindowCoordinates=function(e,r,i,s){a.defined(s)||(s=new t.Cartesian2);var o=He;return t.Matrix4.multiplyByVector(e,n.Cartesian4.fromElements(i.x,i.y,i.z,1,o),o),n.Cartesian4.multiplyByScalar(o,1/o.w,o),t.Matrix4.multiplyByVector(r,o,o),t.Cartesian2.fromCartesian4(o,s)};var $e=new n.Cartesian3,Qe=new n.Cartesian3,Ke=new n.Cartesian3;Se.rotationMatrixFromPositionVelocity=function(e,r,o,u){var l=a.defaultValue(o,s.Ellipsoid.WGS84).geodeticSurfaceNormal(e,$e),d=n.Cartesian3.cross(r,l,Qe);n.Cartesian3.equalsEpsilon(d,n.Cartesian3.ZERO,i.CesiumMath.EPSILON6)&&(d=n.Cartesian3.clone(n.Cartesian3.UNIT_X,d));var c=n.Cartesian3.cross(d,r,Ke);return n.Cartesian3.normalize(c,c),n.Cartesian3.cross(r,c,d),n.Cartesian3.negate(d,d),n.Cartesian3.normalize(d,d),a.defined(u)||(u=new t.Matrix3),u[0]=r.x,u[1]=r.y,u[2]=r.z,u[3]=d.x,u[4]=d.y,u[5]=d.z,u[6]=c.x,u[7]=c.y,u[8]=c.z,u};var ea=new t.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),aa=new r.Cartographic,ta=new n.Cartesian3,na=new n.Cartesian3,ra=new t.Matrix3,ia=new t.Matrix4,sa=new t.Matrix4;Se.basisTo2D=function(e,a,r){var i=t.Matrix4.getTranslation(a,na),s=e.ellipsoid,o=s.cartesianToCartographic(i,aa),u=e.project(o,ta);n.Cartesian3.fromElements(u.z,u.x,u.y,u);var l=Se.eastNorthUpToFixedFrame(i,s,ia),d=t.Matrix4.inverseTransformation(l,sa),c=t.Matrix4.getMatrix3(a,ra),f=t.Matrix4.multiplyByMatrix3(d,c,r);return t.Matrix4.multiply(ea,f,r),t.Matrix4.setTranslation(r,u,r),r},Se.wgs84To2DModelMatrix=function(e,a,r){var i=e.ellipsoid,s=Se.eastNorthUpToFixedFrame(a,i,ia),o=t.Matrix4.inverseTransformation(s,sa),u=i.cartesianToCartographic(a,aa),l=e.project(u,ta);n.Cartesian3.fromElements(l.z,l.x,l.y,l);var d=t.Matrix4.fromTranslation(l,ia);return t.Matrix4.multiply(ea,o,r),t.Matrix4.multiply(d,r,r),r},Se.buildUp=function(e,a){var t=a.clone(),r=e.clone();r=n.Cartesian3.normalize(r,r),Math.abs(n.Cartesian3.dot(r,t))>=1&&(r=Math.abs(n.Cartesian3.dot(t,n.Cartesian3.UNIT_Y))<1?n.Cartesian3.clone(n.Cartesian3.UNIT_Y,r):n.Cartesian3.clone(n.Cartesian3.UNIT_Z,r));var i=new n.Cartesian3;return n.Cartesian3.cross(r,t,i),i=n.Cartesian3.normalize(i,i),n.Cartesian3.cross(t,i,r),r=n.Cartesian3.normalize(r,r)},Se.getHeading=function(e,a){var t;return t=i.CesiumMath.equalsEpsilon(Math.abs(e.z),1,i.CesiumMath.EPSILON3)?Math.atan2(a.y,a.x)-i.CesiumMath.PI_OVER_TWO:Math.atan2(e.y,e.x)-i.CesiumMath.PI_OVER_TWO,i.CesiumMath.TWO_PI-i.CesiumMath.zeroToTwoPi(t)},Se.convertToColumbusCartesian=function(e){var a=new s.GeographicProjection,t=a.ellipsoid,i=new n.Cartesian3,o=new r.Cartographic;return t.cartesianToCartographic(e,o),a.project(o,i),n.Cartesian3.fromElements(i.z,i.x,i.y)},Se.convertTo3DCartesian=function(e){var a=new s.GeographicProjection,t=a.ellipsoid,i=new n.Cartesian3,o=new r.Cartographic;return i=n.Cartesian3.fromElements(e.y,e.z,e.x),a.unproject(i,o),t.cartographicToCartesian(o,i)},e.Quaternion=l,e.Transforms=Se}));
