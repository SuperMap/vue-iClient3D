define(["./when-7d8885d2","./Cartesian2-54f49cd5","./arrayRemoveDuplicates-30a3675e","./BoundingRectangle-0828d65a","./buildModuleUrl-9403d69d","./Cartographic-9ee1f1bd","./ComponentDatatype-94b9147c","./PolylineVolumeGeometryLibrary-28009add","./Check-737bd4ec","./GeometryAttribute-bf27d0ff","./GeometryAttributes-2f749385","./IndexDatatype-cb5f74b7","./Math-4ffce144","./PolygonPipeline-68e6c052","./FeatureDetection-07e177c7","./Event-1c0f5ff4","./RuntimeError-f53bcb51","./WebGLConstants-6b41cc89","./Cartesian4-6d2e270a","./EllipsoidTangentPlane-adf29704","./IntersectionTests-6a0482c9","./Plane-74ce87e7","./PolylinePipeline-89be7253","./EllipsoidGeodesic-83f454fb","./EllipsoidRhumbLine-fd512dba"],(function(e,i,t,n,a,r,o,l,s,p,d,c,u,y,f,h,g,m,v,E,b,P,_,C,k){"use strict";function L(t){var n=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).polylinePositions,a=t.shapePositions;this._positions=n,this._shape=a,this._ellipsoid=i.Ellipsoid.clone(e.defaultValue(t.ellipsoid,i.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(t.cornerType,l.CornerType.ROUNDED),this._granularity=e.defaultValue(t.granularity,u.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var o=1+n.length*r.Cartesian3.packedLength;o+=1+a.length*i.Cartesian2.packedLength,this.packedLength=o+i.Ellipsoid.packedLength+2}L.pack=function(t,n,a){var o;a=e.defaultValue(a,0);var l=t._positions,s=l.length;for(n[a++]=s,o=0;o<s;++o,a+=r.Cartesian3.packedLength)r.Cartesian3.pack(l[o],n,a);var p=t._shape;for(s=p.length,n[a++]=s,o=0;o<s;++o,a+=i.Cartesian2.packedLength)i.Cartesian2.pack(p[o],n,a);return i.Ellipsoid.pack(t._ellipsoid,n,a),a+=i.Ellipsoid.packedLength,n[a++]=t._cornerType,n[a]=t._granularity,n};var D=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),T={polylinePositions:void 0,shapePositions:void 0,ellipsoid:D,height:void 0,cornerType:void 0,granularity:void 0};L.unpack=function(t,n,a){var o;n=e.defaultValue(n,0);var l=t[n++],s=new Array(l);for(o=0;o<l;++o,n+=r.Cartesian3.packedLength)s[o]=r.Cartesian3.unpack(t,n);l=t[n++];var p=new Array(l);for(o=0;o<l;++o,n+=i.Cartesian2.packedLength)p[o]=i.Cartesian2.unpack(t,n);var d=i.Ellipsoid.unpack(t,n,D);n+=i.Ellipsoid.packedLength;var c=t[n++],u=t[n];return e.defined(a)?(a._positions=s,a._shape=p,a._ellipsoid=i.Ellipsoid.clone(d,a._ellipsoid),a._cornerType=c,a._granularity=u,a):(T.polylinePositions=s,T.shapePositions=p,T.cornerType=c,T.granularity=u,new L(T))};var G=new n.BoundingRectangle;return L.createGeometry=function(e){var i=e._positions,s=t.arrayRemoveDuplicates(i,r.Cartesian3.equalsEpsilon),u=e._shape;if(u=l.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(u),!(s.length<2||u.length<3)){y.PolygonPipeline.computeWindingOrder2D(u)===y.WindingOrder.CLOCKWISE&&u.reverse();var h=n.BoundingRectangle.fromPoints(u,G);return function(e,i){var t=new d.GeometryAttributes;t.position=new p.GeometryAttribute({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var n,r,l=i.length,s=t.position.values.length/3,u=e.length/3/l,y=c.IndexDatatype.createTypedArray(s,2*l*(u+1)),h=0,g=(n=0)*l;for(r=0;r<l-1;r++)y[h++]=r+g,y[h++]=r+g+1;for(y[h++]=l-1+g,y[h++]=g,g=(n=u-1)*l,r=0;r<l-1;r++)y[h++]=r+g,y[h++]=r+g+1;for(y[h++]=l-1+g,y[h++]=g,n=0;n<u-1;n++){var m=l*n,v=m+l;for(r=0;r<l;r++)y[h++]=r+m,y[h++]=r+v}return new p.Geometry({attributes:t,indices:c.IndexDatatype.createTypedArray(s,y),boundingSphere:a.BoundingSphere.fromVertices(e),primitiveType:f.PrimitiveType.LINES})}(l.PolylineVolumeGeometryLibrary.computePositions(s,u,h,e,!1),u)}},function(t,n){return e.defined(n)&&(t=L.unpack(t,n)),t._ellipsoid=i.Ellipsoid.clone(t._ellipsoid),L.createGeometry(t)}}));
