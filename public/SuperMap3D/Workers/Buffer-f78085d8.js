define(["exports","./Math-3024ab74","./when-b60132fc","./IndexDatatype-a3f4b187","./WebGLConstants-aba9fc67"],(function(e,t,n,r,f){"use strict";function u(){return!0}var s={STREAM_DRAW:f.WebGLConstants.STREAM_DRAW,STATIC_DRAW:f.WebGLConstants.STATIC_DRAW,DYNAMIC_DRAW:f.WebGLConstants.DYNAMIC_DRAW,validate:function(e){return e===s.STREAM_DRAW||e===s.STATIC_DRAW||e===s.DYNAMIC_DRAW}};function i(e){var t=(e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT)).context._gl,r=e.bufferTarget,f=e.typedArray,u=e.sizeInBytes,s=e.usage,i=n.defined(f);i&&(u=f.byteLength);var a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i?f:u,s),t.bindBuffer(r,null),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=r,this._sizeInBytes=u,this._usage=s,this._buffer=a,this.vertexArrayDestroyable=!0,this.context=e.context,e.context.memorySize+=u}i.createVertexBuffer=function(e){return new i({context:e.context,bufferTarget:f.WebGLConstants.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})},i.createIndexBuffer=function(e){var t=e.context,n=e.indexDatatype,u=r.IndexDatatype.getSizeInBytes(n),s=new i({context:t,bufferTarget:f.WebGLConstants.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),a=s.sizeInBytes/u;return Object.defineProperties(s,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return u}},numberOfIndices:{get:function(){return a}}}),s},Object.defineProperties(i.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}}),i.prototype._getBuffer=function(){return this._buffer},i.prototype.copyFromArrayView=function(e,t){t=n.defaultValue(t,0);var r=this._gl,f=this._bufferTarget;r.bindBuffer(f,this._buffer),r.bufferSubData(f,t,e),r.bindBuffer(f,null)},i.prototype.copyFromBuffer=function(e,t,n,r){var u=f.WebGLConstants.COPY_READ_BUFFER,s=f.WebGLConstants.COPY_WRITE_BUFFER,i=this._gl;i.bindBuffer(s,this._buffer),i.bindBuffer(u,e._buffer),i.copyBufferSubData(u,s,t,n,r),i.bindBuffer(s,null),i.bindBuffer(u,null)},i.prototype.getBufferData=function(e,t,r,u){t=n.defaultValue(t,0),r=n.defaultValue(r,0);var s=this._gl,i=f.WebGLConstants.COPY_READ_BUFFER;s.bindBuffer(i,this._buffer),s.getBufferSubData(i,t,e,r,u),s.bindBuffer(i,null)},i.prototype.isDestroyed=function(){return!1},i.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),this.context.memorySize-=this.sizeInBytes,function(e,t){function n(){}for(var r in e)"function"==typeof e[r]&&(e[r]=n);e.isDestroyed=u}(this)},e.Buffer=i,e.BufferUsage=s}));
